<!DOCTYPE html>
<html lang="mn" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Neurosun Academy - Тархины хөгжлийн сургалтын төв</title>
    <meta name="description" content="Neurosun Academy нь neuro шинжлэх ухаанд суурилсан хүүхдийн тархины хөгжил болон суралцах ур чадварыг хүүхэд бүрийн онцлогт тулгуурлан хөгжүүлдэг цогц сургалтын төв юм .">
    <meta name="keywords" content="тархины хөгжил, хүүхдийн сургалт, анхаарал төвлөрөлт, ой тогтоолт, дэлгэцийн хамаарал, cognifit, нейро сургалт, унших, ганцаарчилсан, оношилгоо">
    <meta name="author" content="Neurosun Academy">
    <meta name="robots" content="index, follow">
    <meta property="og:title" content="Neurosun Academy - Хүүхдийн тархины хөгжлийн сургалт">
    <meta property="og:description" content=" neuro шинжлэх ухаанд суурилсан хүүхдийн тархины хөгжил болон суралцах ур чадварыг хүүхэд бүрийн онцлогт тулгуурлан хөгжүүлдэг цогц сургалтын төв юм">
    <meta property="og:image" content="https://scontent.fuln4-2.fna.fbcdn.net/v/t39.30808-6/457514844_1061801679281868_1579251696753935396_n.jpg?_nc_cat=107&ccb=1-7&_nc_sid=6ee11a&_nc_ohc=MUKSdvo2JEsQ7kNvwHD_0b-&_nc_oc=AdkZBx6sDBRdfZmXL8YROGmyVY_kZyfjwHsj_5GRFp1X5qaue3KtArGMQd8Dk7ojX1A&_nc_zt=23&_nc_ht=scontent.fuln4-2.fna&_nc_gid=QF0GWlwE62QYY9W1aKVB0g&oh=00_AflNBahWf-omcEqFYg2uq1BTO6I2FgRE7dlwUxTMEAI3Bw&oe=69495071">
    <meta property="og:url" content="https://www.neurosunacademy.com">
    <meta name="twitter:card" content="summary_large_image">
    
    <!-- Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-XXXXXXXXXX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-XXXXXXXXXX');
        
        // Enhanced E-commerce events
        gtag('event', 'page_view', {
            'send_to': 'G-XXXXXXXXXX',
            'page_title': 'Neurosun Academy - Main Page',
            'page_location': window.location.href,
            'page_path': window.location.pathname
        });
    </script>
    
    <!-- EmailJS Script -->
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
    <script type="text/javascript">
        (function() {
            emailjs.init("YOUR_PUBLIC_KEY"); // EmailJS public key
        })();
    </script>
    
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="https://cdn.neurosunacademy.com/favicon.ico">
    <link rel="apple-touch-icon" sizes="180x180" href="https://cdn.neurosunacademy.com/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="https://cdn.neurosunacademy.com/favicon-32x32.png">
    
    <!-- External Libraries -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css">
    
    <style>
        /* CSS Variables - Design System */
        :root {
            /* Primary Colors */
            --primary: #4a6fa5;
            --primary-dark: #3a5980;
            --primary-light: #6b93cc;
            --primary-rgb: 74, 111, 165;
            
            /* Secondary Colors */
            --secondary: #ffb400;
            --secondary-dark: #e6a200;
            --secondary-light: #ffcb4d;
            --secondary-rgb: 255, 180, 0;
            
            /* Neutral Colors */
            --light: #f5f9ff;
            --light-gray: #f8f9fa;
            --gray-light: #e9ecef;
            --gray: #6c757d;
            --gray-dark: #495057;
            --dark: #2c3e50;
            --dark-rgb: 44, 62, 80;
            --white: #ffffff;
            --black: #000000;
            
            /* Chart Colors */
            --chart-alpha: #4a6fa5;
            --chart-beta: #ff6b6b;
            --chart-gamma: #51cf66;
            --chart-theta: #ffd43b;
            --chart-cognitive-1: #339af0;
            --chart-cognitive-2: #ff922b;
            --chart-cognitive-3: #94d82d;
            --chart-cognitive-4: #f06595;
            --chart-cognitive-5: #cc5de8;
            --chart-learning-1: #20c997;
            --chart-learning-2: #ff6b6b;
            --chart-learning-3: #748ffc;
            --chart-learning-4: #f06595;
            --chart-learning-5: #ff922b;
            --chart-learning-6: #51cf66;
            
            /* Semantic Colors */
            --success: #28a745;
            --success-light: #d4edda;
            --warning: #ffc107;
            --warning-light: #fff3cd;
            --danger: #dc3545;
            --danger-light: #f8d7da;
            --info: #17a2b8;
            --info-light: #d1ecf1;
            
            /* Spacing */
            --spacing-xs: 0.25rem;
            --spacing-sm: 0.5rem;
            --spacing-md: 1rem;
            --spacing-lg: 1.5rem;
            --spacing-xl: 2rem;
            --spacing-xxl: 3rem;
            
            /* Border Radius */
            --radius-sm: 5px;
            --radius-md: 10px;
            --radius-lg: 15px;
            --radius-xl: 20px;
            --radius-round: 50%;
            
            /* Shadows */
            --shadow-sm: 0 2px 4px rgba(0,0,0,0.1);
            --shadow-md: 0 4px 8px rgba(0,0,0,0.12);
            --shadow-lg: 0 8px 16px rgba(0,0,0,0.15);
            --shadow-xl: 0 12px 24px rgba(0,0,0,0.2);
            --shadow-inner: inset 0 2px 4px rgba(0,0,0,0.06);
            
            /* Transitions */
            --transition-fast: all 0.2s ease;
            --transition-normal: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            --transition-slow: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            
            /* Typography */
            --font-family-base: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            --font-family-heading: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            --font-size-xs: 0.75rem;
            --font-size-sm: 0.875rem;
            --font-size-base: 1rem;
            --font-size-lg: 1.125rem;
            --font-size-xl: 1.25rem;
            --font-size-xxl: 1.5rem;
            --font-size-xxxl: 2rem;
            --font-size-display: 3rem;
            
            /* Layout */
            --container-max-width: 1200px;
            --header-height: 80px;
            --sidebar-width: 280px;
            
            /* Z-index Layers */
            --z-dropdown: 1000;
            --z-sticky: 1020;
            --z-fixed: 1030;
            --z-modal-backdrop: 1040;
            --z-modal: 1050;
            --z-popover: 1060;
            --z-tooltip: 1070;
            --z-toast: 1080;
        }

        /* Reset & Base Styles */
        *, *::before, *::after {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            scroll-behavior: smooth;
            font-size: 16px;
            -webkit-text-size-adjust: 100%;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            font-family: var(--font-family-base);
            background-color: var(--light);
            color: var(--dark);
            line-height: 1.6;
            overflow-x: hidden;
            min-height: 100vh;
            text-rendering: optimizeLegibility;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        h1, h2, h3, h4, h5, h6 {
            font-family: var(--font-family-heading);
            font-weight: 700;
            line-height: 1.2;
            margin-bottom: var(--spacing-md);
            color: var(--dark);
        }

        h1 { font-size: var(--font-size-display); }
        h2 { font-size: var(--font-size-xxxl); }
        h3 { font-size: var(--font-size-xxl); }
        h4 { font-size: var(--font-size-xl); }
        h5 { font-size: var(--font-size-lg); }
        h6 { font-size: var(--font-size-base); }

        p {
            margin-bottom: var(--spacing-md);
        }

        a {
            text-decoration: none;
            color: var(--primary);
            transition: var(--transition-fast);
        }

        a:hover {
            color: var(--primary-dark);
        }

        ul, ol {
            list-style-position: inside;
            margin-bottom: var(--spacing-md);
        }

        img {
            max-width: 100%;
            height: auto;
            display: block;
            border-style: none;
        }

        button, input, select, textarea {
            font-family: inherit;
            font-size: inherit;
            line-height: inherit;
        }

        button {
            cursor: pointer;
        }

        /* Utility Classes */
        .container {
            width: 90%;
            max-width: var(--container-max-width);
            margin: 0 auto;
            padding: 0 var(--spacing-md);
        }

        .section {
            padding: var(--spacing-xxl) 0;
        }

        .section-title {
            text-align: center;
            margin-bottom: var(--spacing-xxl);
        }

        .section-title h2 {
            font-size: var(--font-size-xxxl);
            color: var(--primary);
            position: relative;
            display: inline-block;
            padding-bottom: var(--spacing-md);
            margin-bottom: var(--spacing-md);
        }

        .section-title h2::after {
            content: '';
            position: absolute;
            width: 70px;
            height: 4px;
            background-color: var(--secondary);
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            border-radius: 2px;
        }

        .section-title p {
            color: var(--gray);
            max-width: 600px;
            margin: 0 auto;
            font-size: var(--font-size-lg);
        }

        /* Status Badges */
        .status-badge {
            display: inline-block;
            padding: var(--spacing-xs) var(--spacing-sm);
            border-radius: var(--radius-sm);
            font-size: var(--font-size-xs);
            font-weight: 600;
            margin-left: var(--spacing-sm);
        }
        
        .status-pending {
            background-color: var(--warning-light);
            color: var(--warning);
        }
        
        .status-approved {
            background-color: var(--success-light);
            color: var(--success);
        }
        
        .status-rejected {
            background-color: var(--danger-light);
            color: var(--danger);
        }

        /* Text Utilities */
        .text-center { text-align: center; }
        .text-left { text-align: left; }
        .text-right { text-align: right; }
        .text-primary { color: var(--primary); }
        .text-secondary { color: var(--secondary); }
        .text-success { color: var(--success); }
        .text-danger { color: var(--danger); }
        .text-warning { color: var(--warning); }
        .text-info { color: var(--info); }
        .text-gray { color: var(--gray); }
        .text-light { color: var(--light); }
        .text-white { color: var(--white); }
        
        /* Background Utilities */
        .bg-primary { background-color: var(--primary); }
        .bg-secondary { background-color: var(--secondary); }
        .bg-light { background-color: var(--light); }
        .bg-white { background-color: var(--white); }
        .bg-dark { background-color: var(--dark); }
        .bg-success { background-color: var(--success); }
        .bg-danger { background-color: var(--danger); }
        
        /* Spacing Utilities */
        .mt-1 { margin-top: var(--spacing-xs); }
        .mt-2 { margin-top: var(--spacing-sm); }
        .mt-3 { margin-top: var(--spacing-md); }
        .mt-4 { margin-top: var(--spacing-lg); }
        .mt-5 { margin-top: var(--spacing-xl); }
        
        .mb-1 { margin-bottom: var(--spacing-xs); }
        .mb-2 { margin-bottom: var(--spacing-sm); }
        .mb-3 { margin-bottom: var(--spacing-md); }
        .mb-4 { margin-bottom: var(--spacing-lg); }
        .mb-5 { margin-bottom: var(--spacing-xl); }
        
        .p-1 { padding: var(--spacing-xs); }
        .p-2 { padding: var(--spacing-sm); }
        .p-3 { padding: var(--spacing-md); }
        .p-4 { padding: var(--spacing-lg); }
        .p-5 { padding: var(--spacing-xl); }
        
        /* Display Utilities */
        .d-none { display: none !important; }
        .d-block { display: block !important; }
        .d-inline { display: inline !important; }
        .d-inline-block { display: inline-block !important; }
        .d-flex { display: flex !important; }
        .d-grid { display: grid !important; }
        
        /* Flex Utilities */
        .flex-column { flex-direction: column; }
        .flex-row { flex-direction: row; }
        .justify-center { justify-content: center; }
        .justify-between { justify-content: space-between; }
        .justify-end { justify-content: flex-end; }
        .align-center { align-items: center; }
        .align-start { align-items: flex-start; }
        .align-end { align-items: flex-end; }
        .flex-wrap { flex-wrap: wrap; }
        .flex-1 { flex: 1; }
        
        /* Grid Utilities */
        .grid-2 { grid-template-columns: repeat(2, 1fr); }
        .grid-3 { grid-template-columns: repeat(3, 1fr); }
        .grid-4 { grid-template-columns: repeat(4, 1fr); }
        
        /* Button Styles */
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: var(--spacing-sm);
            background-color: var(--secondary);
            color: var(--white);
            padding: var(--spacing-md) var(--spacing-xl);
            border-radius: 30px;
            font-weight: 600;
            transition: var(--transition-normal);
            border: none;
            cursor: pointer;
            text-align: center;
            font-size: var(--font-size-base);
            line-height: 1.5;
            position: relative;
            overflow: hidden;
            user-select: none;
            vertical-align: middle;
            box-shadow: var(--shadow-sm);
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background-color: rgba(255, 255, 255, 0.2);
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
        }

        .btn:hover::before {
            width: 300px;
            height: 300px;
        }

        .btn:hover {
            background-color: var(--secondary-dark);
            transform: translateY(-3px);
            box-shadow: var(--shadow-lg);
        }

        .btn:active {
            transform: translateY(-1px);
            box-shadow: var(--shadow-md);
        }

        .btn:focus {
            outline: 3px solid rgba(var(--primary-rgb), 0.3);
            outline-offset: 3px;
        }

        .btn:disabled {
            opacity: 0.65;
            cursor: not-allowed;
            transform: none !important;
        }

        .btn-primary {
            background-color: var(--primary);
        }

        .btn-primary:hover {
            background-color: var(--primary-dark);
        }

        .btn-outline {
            background-color: transparent;
            border: 2px solid var(--secondary);
            color: var(--secondary);
        }

        .btn-outline:hover {
            background-color: var(--secondary);
            color: var(--white);
        }

        .btn-outline-primary {
            background-color: transparent;
            border: 2px solid var(--primary);
            color: var(--primary);
        }

        .btn-outline-primary:hover {
            background-color: var(--primary);
            color: var(--white);
        }

        .btn-block {
            display: flex;
            width: 100%;
        }

        .btn-lg {
            padding: var(--spacing-lg) var(--spacing-xxl);
            font-size: var(--font-size-lg);
        }

        .btn-sm {
            padding: var(--spacing-sm) var(--spacing-lg);
            font-size: var(--font-size-sm);
        }

        .btn-success {
            background-color: var(--success);
        }

        .btn-success:hover {
            background-color: #218838;
        }

        .btn-danger {
            background-color: var(--danger);
        }

        .btn-danger:hover {
            background-color: #c82333;
        }

        .btn-warning {
            background-color: var(--warning);
            color: var(--dark);
        }

        .btn-warning:hover {
            background-color: #e0a800;
        }

        .btn-admin {
            background-color: var(--danger);
            color: var(--white);
        }

        .btn-admin:hover {
            background-color: #c82333;
        }

        /* Accessibility */
        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border: 0;
        }

        :focus {
            outline: 3px solid rgba(var(--primary-rgb), 0.3);
            outline-offset: 3px;
        }

        :focus:not(:focus-visible) {
            outline: none;
        }

        /* Skip to Content */
        .skip-to-content {
            position: absolute;
            top: -40px;
            left: 0;
            background: var(--primary);
            color: white;
            padding: var(--spacing-md);
            z-index: var(--z-popover);
            transition: top 0.3s;
        }

        .skip-to-content:focus {
            top: 0;
        }

        /* Header & Navigation */
        header {
            background-color: var(--white);
            box-shadow: var(--shadow-sm);
            position: sticky;
            top: 0;
            z-index: var(--z-sticky);
            transition: var(--transition-normal);
            height: var(--header-height);
        }

        header.scrolled {
            box-shadow: var(--shadow-md);
        }

        .navbar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            height: 100%;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: var(--spacing-md);
            text-decoration: none;
        }

        .logo-img {
            height: 50px;
            width: auto;
        }

        .logo-text h1 {
            font-size: var(--font-size-xxl);
            color: var(--primary);
            margin-bottom: 0;
            line-height: 1;
        }

        .logo-text span {
            color: var(--secondary);
            display: block;
            font-size: var(--font-size-sm);
            font-weight: 400;
        }

        .nav-links {
            display: flex;
            gap: var(--spacing-lg);
            list-style: none;
        }

        .nav-links a {
            font-weight: 500;
            position: relative;
            padding: var(--spacing-sm) 0;
            color: var(--dark);
        }

        .nav-links a:hover {
            color: var(--primary);
        }

        .nav-links a::after {
            content: '';
            position: absolute;
            width: 0;
            height: 2px;
            background-color: var(--primary);
            bottom: 0;
            left: 0;
            transition: var(--transition-normal);
        }

        .nav-links a:hover::after {
            width: 100%;
        }

        .nav-links a.active {
            color: var(--primary);
        }

        .nav-links a.active::after {
            width: 100%;
        }

        .mobile-menu-btn {
            display: none;
            background: none;
            border: none;
            font-size: var(--font-size-xxl);
            color: var(--primary);
            cursor: pointer;
            padding: var(--spacing-sm);
            width: 44px;
            height: 44px;
            border-radius: var(--radius-sm);
            transition: var(--transition-fast);
        }

        .mobile-menu-btn:hover {
            background-color: var(--light-gray);
        }

        /* Hero Section */
        .hero {
            background: linear-gradient(rgba(74, 111, 165, 0.85), rgba(58, 89, 128, 0.9)), 
                        url('https://cdn.neurosunacademy.com/images/hero-bg.jpg') no-repeat center center;
            background-size: cover;
            color: var(--white);
            padding: var(--spacing-xxl) 0;
            text-align: center;
            position: relative;
            overflow: hidden;
            min-height: 600px;
            display: flex;
            align-items: center;
        }

        .hero-content {
            position: relative;
            z-index: 1;
            max-width: 800px;
            margin: 0 auto;
        }

        .hero h1 {
            font-size: var(--font-size-display);
            margin-bottom: var(--spacing-lg);
            color: var(--white);
            text-shadow: 2px 2px 8px rgba(0, 0, 0, 0.3);
        }

        .hero p {
            font-size: var(--font-size-xl);
            margin-bottom: var(--spacing-xl);
            opacity: 0.95;
            line-height: 1.7;
        }

        .hero-buttons {
            display: flex;
            justify-content: center;
            gap: var(--spacing-md);
            flex-wrap: wrap;
            margin-top: var(--spacing-xl);
        }

        /* About Section */
        .about-content {
            display: flex;
            align-items: center;
            gap: var(--spacing-xxl);
        }

        .about-text {
            flex: 1;
        }

        .about-image {
            flex: 1;
            border-radius: var(--radius-lg);
            overflow: hidden;
            box-shadow: var(--shadow-xl);
        }

        .about-image img {
            width: 100%;
            height: auto;
            display: block;
            transition: var(--transition-normal);
        }

        .about-image:hover img {
            transform: scale(1.05);
        }

        /* Features Section */
        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: var(--spacing-lg);
        }

        .feature-card {
            background-color: var(--white);
            border-radius: var(--radius-lg);
            padding: var(--spacing-xl);
            box-shadow: var(--shadow-md);
            transition: var(--transition-normal);
            border-top: 4px solid var(--primary);
            height: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
        }

        .feature-card:hover {
            transform: translateY(-10px);
            box-shadow: var(--shadow-xl);
        }

        .feature-icon {
            font-size: 3rem;
            color: var(--primary);
            margin-bottom: var(--spacing-lg);
            width: 80px;
            height: 80px;
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: rgba(var(--primary-rgb), 0.1);
            border-radius: var(--radius-round);
        }

        .feature-card h3 {
            margin-bottom: var(--spacing-md);
            color: var(--primary);
            font-size: var(--font-size-xl);
        }

        /* Programs Section */
        .programs-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: var(--spacing-lg);
        }

        .program-card {
            background-color: var(--white);
            border-radius: var(--radius-lg);
            overflow: hidden;
            box-shadow: var(--shadow-md);
            transition: var(--transition-normal);
            display: flex;
            flex-direction: column;
            height: 100%;
        }

        .program-card.featured {
            border: 2px solid var(--secondary);
            transform: scale(1.02);
        }

        .program-card:hover {
            transform: translateY(-10px);
            box-shadow: var(--shadow-xl);
        }

        .program-card.featured:hover {
            transform: translateY(-10px) scale(1.02);
        }

        .program-badge {
            position: absolute;
            top: var(--spacing-md);
            right: var(--spacing-md);
            background-color: var(--secondary);
            color: var(--white);
            padding: var(--spacing-xs) var(--spacing-lg);
            border-radius: 20px;
            font-size: var(--font-size-sm);
            font-weight: 600;
            z-index: 1;
        }

        .program-image {
            height: 200px;
            overflow: hidden;
            position: relative;
        }

        .program-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: var(--transition-normal);
        }

        .program-card:hover .program-image img {
            transform: scale(1.1);
        }

        .program-content {
            padding: var(--spacing-lg);
            flex-grow: 1;
            display: flex;
            flex-direction: column;
        }

        .program-content h3 {
            color: var(--primary);
            margin-bottom: var(--spacing-sm);
        }

        .program-price {
            font-size: var(--font-size-xxl);
            font-weight: 700;
            color: var(--secondary);
            margin: var(--spacing-md) 0;
        }

        .program-features {
            margin: var(--spacing-md) 0;
            flex-grow: 1;
        }

        .program-features li {
            margin-bottom: var(--spacing-sm);
            display: flex;
            align-items: flex-start;
        }

        .program-features i {
            color: var(--success);
            margin-right: var(--spacing-sm);
            margin-top: var(--spacing-xs);
            flex-shrink: 0;
        }

        /* Registration Section */
        .registration {
            background: linear-gradient(135deg, var(--light-gray), var(--gray-light));
        }

        .form-container {
            max-width: 800px;
            margin: 0 auto;
            background-color: var(--white);
            padding: var(--spacing-xl);
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-xl);
        }

        .form-group {
            margin-bottom: var(--spacing-lg);
        }

        .form-row {
            display: flex;
            gap: var(--spacing-lg);
        }

        .form-row .form-group {
            flex: 1;
        }

        .form-group label {
            display: block;
            margin-bottom: var(--spacing-sm);
            font-weight: 500;
            color: var(--dark);
        }

        .form-group .required::after {
            content: '*';
            color: var(--danger);
            margin-left: var(--spacing-xs);
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: var(--spacing-md) var(--spacing-lg);
            border: 1px solid var(--gray-light);
            border-radius: var(--radius-sm);
            font-size: var(--font-size-base);
            transition: var(--transition-normal);
            background-color: var(--white);
            color: var(--dark);
        }

        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            border-color: var(--primary);
            outline: none;
            box-shadow: 0 0 0 3px rgba(var(--primary-rgb), 0.2);
        }

        .form-group .error-message {
            color: var(--danger);
            font-size: var(--font-size-sm);
            margin-top: var(--spacing-xs);
            display: none;
        }

        .form-group.has-error input,
        .form-group.has-error select,
        .form-group.has-error textarea {
            border-color: var(--danger);
            box-shadow: 0 0 0 3px rgba(var(--danger-rgb), 0.1);
        }

        .form-group.has-error .error-message {
            display: block;
        }

        .form-group .form-help {
            color: var(--gray);
            font-size: var(--font-size-sm);
            margin-top: var(--spacing-xs);
            display: block;
        }

        /* Login Credentials Display */
        .credentials-display {
            background-color: var(--success-light);
            border: 1px solid var(--success);
            border-radius: var(--radius-md);
            padding: var(--spacing-lg);
            margin-top: var(--spacing-lg);
        }

        .credentials-display h4 {
            color: var(--success);
            margin-bottom: var(--spacing-md);
        }

        .credential-item {
            display: flex;
            align-items: center;
            margin-bottom: var(--spacing-sm);
            padding: var(--spacing-sm);
            background-color: rgba(255, 255, 255, 0.8);
            border-radius: var(--radius-sm);
        }

        .credential-label {
            min-width: 120px;
            font-weight: 600;
            color: var(--dark);
        }

        .credential-value {
            flex: 1;
            font-family: monospace;
            padding: var(--spacing-xs) var(--spacing-sm);
            background-color: var(--white);
            border-radius: var(--radius-sm);
            border: 1px solid var(--gray-light);
        }

        /* Dashboard Styles */
        .dashboard {
            display: none;
            min-height: calc(100vh - var(--header-height));
            background-color: var(--light-gray);
        }

        .dashboard-header {
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            color: var(--white);
            padding: var(--spacing-xxl) 0;
            margin-bottom: var(--spacing-xl);
        }

        .dashboard-header h2 {
            color: var(--white);
            margin-bottom: var(--spacing-sm);
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.2);
        }

        .dashboard-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: var(--spacing-lg);
            margin-bottom: var(--spacing-xl);
        }

        .dashboard-card {
            background-color: var(--white);
            border-radius: var(--radius-lg);
            padding: var(--spacing-lg);
            box-shadow: var(--shadow-md);
            transition: var(--transition-normal);
        }

        .dashboard-card:hover {
            box-shadow: var(--shadow-lg);
        }

        .dashboard-card h3 {
            color: var(--primary);
            margin-bottom: var(--spacing-lg);
            display: flex;
            align-items: center;
            gap: var(--spacing-sm);
            font-size: var(--font-size-xl);
        }

        .dashboard-card h3 i {
            font-size: var(--font-size-lg);
        }

        .student-details p {
            margin-bottom: var(--spacing-sm);
            display: flex;
            flex-wrap: wrap;
        }

        .student-details strong {
            min-width: 150px;
            color: var(--gray-dark);
        }

        .student-details span {
            flex: 1;
        }

        /* Progress Bars */
        .progress-item {
            margin-bottom: var(--spacing-lg);
        }

        .progress-info {
            display: flex;
            justify-content: space-between;
            margin-bottom: var(--spacing-xs);
        }

        .progress-label {
            font-weight: 500;
            color: var(--dark);
        }

        .progress-value {
            font-weight: 600;
            color: var(--primary);
        }

        .progress-bar {
            height: 12px;
            background-color: var(--gray-light);
            border-radius: 6px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            border-radius: 6px;
            width: 0%;
            transition: width 1.5s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
        }

        .remaining-days-card {
            background: linear-gradient(135deg, var(--secondary), var(--secondary-dark));
            color: var(--white);
            text-align: center;
        }

        .remaining-days-card h3 {
            color: var(--white);
        }

        .days-count {
            font-size: 4rem;
            font-weight: 700;
            margin: var(--spacing-md) 0;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2);
        }

        /* Training Schedule */
        .training-schedule {
            max-height: 300px;
            overflow-y: auto;
        }

        .training-session {
            padding: var(--spacing-sm);
            border-bottom: 1px solid var(--gray-light);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .session-date {
            font-weight: 600;
            color: var(--primary);
        }

        .session-info {
            font-size: var(--font-size-sm);
            color: var(--gray);
        }

        /* Chart Styles */
        .chart-container {
            margin-top: var(--spacing-lg);
            position: relative;
            height: 250px;
        }

        .brainwave-chart {
            height: 200px;
            margin-top: var(--spacing-md);
        }

        .brainwave-legend {
            display: flex;
            justify-content: center;
            gap: var(--spacing-md);
            margin-top: var(--spacing-sm);
            flex-wrap: wrap;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: var(--spacing-xs);
            font-size: var(--font-size-sm);
        }

        .legend-color {
            width: 12px;
            height: 12px;
            border-radius: var(--radius-round);
        }

        .chart-row {
            display: flex;
            align-items: center;
            margin-bottom: var(--spacing-sm);
        }

        .chart-label {
            min-width: 120px;
            font-size: var(--font-size-sm);
            color: var(--gray-dark);
        }

        .chart-bar-container {
            flex: 1;
            height: 20px;
            background-color: var(--gray-light);
            border-radius: var(--radius-sm);
            overflow: hidden;
            position: relative;
        }

        .chart-bar {
            height: 100%;
            border-radius: var(--radius-sm);
            transition: width 1.5s ease;
        }

        .chart-value {
            min-width: 40px;
            text-align: right;
            font-size: var(--font-size-sm);
            font-weight: 600;
        }

        .admin-controls {
            margin-top: var(--spacing-lg);
            padding-top: var(--spacing-lg);
            border-top: 1px solid var(--gray-light);
        }

        .admin-controls h4 {
            color: var(--danger);
            margin-bottom: var(--spacing-md);
            font-size: var(--font-size-lg);
        }

        .update-controls {
            display: flex;
            gap: var(--spacing-sm);
            flex-wrap: wrap;
        }

        .update-input {
            flex: 1;
            min-width: 120px;
            padding: var(--spacing-sm);
            border: 1px solid var(--gray-light);
            border-radius: var(--radius-sm);
            font-size: var(--font-size-sm);
        }

        /* Admin Panel Styles */
        .admin-panel {
            display: none;
            min-height: calc(100vh - var(--header-height));
            background-color: var(--light-gray);
        }

        .admin-header {
            background: linear-gradient(135deg, var(--danger), #c82333);
            color: var(--white);
            padding: var(--spacing-xxl) 0;
            margin-bottom: var(--spacing-xl);
        }

        .admin-header h2 {
            color: var(--white);
            margin-bottom: var(--spacing-sm);
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.2);
        }

        .admin-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: var(--spacing-lg);
            margin-bottom: var(--spacing-xl);
        }

        .admin-card {
            background-color: var(--white);
            border-radius: var(--radius-lg);
            padding: var(--spacing-lg);
            box-shadow: var(--shadow-md);
            transition: var(--transition-normal);
        }

        .admin-card h3 {
            color: var(--danger);
            margin-bottom: var(--spacing-lg);
            display: flex;
            align-items: center;
            gap: var(--spacing-sm);
            font-size: var(--font-size-xl);
        }

        .users-list {
            max-height: 400px;
            overflow-y: auto;
            border: 1px solid var(--gray-light);
            border-radius: var(--radius-sm);
        }

        .user-item {
            padding: var(--spacing-md);
            border-bottom: 1px solid var(--gray-light);
            cursor: pointer;
            transition: var(--transition-fast);
        }

        .user-item:hover {
            background-color: var(--light);
        }

        .user-item.active {
            background-color: rgba(var(--primary-rgb), 0.1);
            border-left: 4px solid var(--primary);
        }

        .user-info {
            font-size: var(--font-size-sm);
        }

        .user-role {
            display: inline-block;
            padding: var(--spacing-xs) var(--spacing-sm);
            border-radius: var(--radius-sm);
            font-size: var(--font-size-xs);
            font-weight: 600;
            margin-left: var(--spacing-sm);
        }

        .role-student { background-color: var(--info-light); color: var(--info); }
        .role-parent { background-color: var(--success-light); color: var(--success); }
        .role-admin { background-color: var(--danger-light); color: var(--danger); }

        .progress-history {
            display: flex;
            flex-direction: column;
            gap: var(--spacing-md);
        }

        .progress-entry {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: var(--spacing-sm);
            border-radius: var(--radius-sm);
            background-color: var(--light);
        }

        .progress-date {
            font-size: var(--font-size-sm);
            color: var(--gray);
        }

        /* Payment Section Styles */
        .payment-section {
            background-color: var(--white);
            border-radius: var(--radius-lg);
            padding: var(--spacing-xl);
            margin-top: var(--spacing-xl);
            box-shadow: var(--shadow-md);
        }

        .payment-methods {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: var(--spacing-lg);
            margin-bottom: var(--spacing-xl);
        }

        .payment-method {
            background-color: var(--light-gray);
            border-radius: var(--radius-md);
            padding: var(--spacing-lg);
            text-align: center;
            transition: var(--transition-normal);
            border: 2px solid transparent;
            cursor: pointer;
        }

        .payment-method:hover {
            border-color: var(--primary);
            transform: translateY(-5px);
        }

        .payment-method.active {
            border-color: var(--primary);
            background-color: rgba(var(--primary-rgb), 0.05);
        }

        .payment-method i {
            font-size: 3rem;
            color: var(--primary);
            margin-bottom: var(--spacing-md);
        }

        .bank-details {
            background-color: var(--light-gray);
            border-radius: var(--radius-md);
            padding: var(--spacing-lg);
            margin-top: var(--spacing-lg);
        }

        .bank-info {
            display: flex;
            align-items: center;
            margin-bottom: var(--spacing-md);
            padding: var(--spacing-sm);
            background-color: var(--white);
            border-radius: var(--radius-sm);
            border: 1px solid var(--gray-light);
        }

        .bank-label {
            min-width: 150px;
            font-weight: 600;
            color: var(--dark);
        }

        .bank-value {
            flex: 1;
            font-family: monospace;
            padding: var(--spacing-sm);
            background-color: var(--light);
            border-radius: var(--radius-sm);
        }

        .qr-code {
            text-align: center;
            margin-top: var(--spacing-lg);
            padding: var(--spacing-lg);
            background-color: var(--white);
            border-radius: var(--radius-md);
        }

        .qr-code img {
            max-width: 200px;
            margin: 0 auto;
        }

        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: var(--z-modal);
            justify-content: center;
            align-items: center;
            padding: var(--spacing-md);
            backdrop-filter: blur(4px);
        }

        .modal.active {
            display: flex;
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .modal-content {
            background-color: var(--white);
            padding: var(--spacing-xl);
            border-radius: var(--radius-lg);
            width: 100%;
            max-width: 800px;
            box-shadow: var(--shadow-xl);
            position: relative;
            animation: slideUp 0.3s ease;
            max-height: 90vh;
            overflow-y: auto;
        }

        @keyframes slideUp {
            from { transform: translateY(50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        .close-modal {
            position: absolute;
            top: var(--spacing-lg);
            right: var(--spacing-lg);
            font-size: var(--font-size-xxl);
            cursor: pointer;
            color: var(--gray);
            transition: var(--transition-fast);
            background: none;
            border: none;
            width: 36px;
            height: 36px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: var(--radius-round);
            z-index: 1;
        }

        .close-modal:hover {
            color: var(--dark);
            background-color: var(--gray-light);
        }

        /* Dashboard Actions */
        .dashboard-actions {
            display: flex;
            justify-content: center;
            gap: var(--spacing-md);
            flex-wrap: wrap;
            padding: var(--spacing-lg);
            background-color: var(--white);
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-md);
            margin-bottom: var(--spacing-xl);
        }

        /* Loading Spinner */
        .spinner {
            display: inline-block;
            width: 40px;
            height: 40px;
            border: 4px solid rgba(var(--primary-rgb), 0.2);
            border-radius: 50%;
            border-top-color: var(--primary);
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .spinner-sm {
            width: 20px;
            height: 20px;
            border-width: 3px;
        }

        .spinner-lg {
            width: 60px;
            height: 60px;
            border-width: 5px;
        }

        /* Toast Notification */
        .toast {
            position: fixed;
            bottom: var(--spacing-xl);
            right: var(--spacing-xl);
            padding: var(--spacing-lg) var(--spacing-xl);
            border-radius: var(--radius-md);
            color: var(--white);
            font-weight: 500;
            z-index: var(--z-toast);
            transform: translateX(400px);
            opacity: 0;
            transition: transform 0.3s cubic-bezier(0.68, -0.55, 0.265, 1.55), 
                        opacity 0.3s ease;
            max-width: 400px;
            box-shadow: var(--shadow-xl);
            display: flex;
            align-items: center;
            gap: var(--spacing-md);
        }

        .toast.show {
            transform: translateX(0);
            opacity: 1;
        }

        .toast i {
            font-size: var(--font-size-xl);
        }

        .toast-success {
            background-color: var(--success);
            border-left: 4px solid darkgreen;
        }

        .toast-error {
            background-color: var(--danger);
            border-left: 4px solid darkred;
        }

        .toast-warning {
            background-color: var(--warning);
            color: var(--dark);
            border-left: 4px solid darkorange;
        }

        .toast-info {
            background-color: var(--info);
            border-left: 4px solid darkblue;
        }

        /* Footer */
        footer {
            background-color: var(--dark);
            color: var(--white);
            padding: var(--spacing-xxl) 0 var(--spacing-lg);
        }

        .footer-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: var(--spacing-xxl);
            margin-bottom: var(--spacing-xxl);
        }

        .footer-section h3 {
            margin-bottom: var(--spacing-lg);
            color: var(--secondary);
            font-size: var(--font-size-xl);
        }

        .footer-links {
            list-style: none;
        }

        .footer-links li {
            margin-bottom: var(--spacing-sm);
        }

        .footer-links a {
            color: rgba(255, 255, 255, 0.8);
            transition: var(--transition-fast);
        }

        .footer-links a:hover {
            color: var(--secondary);
            padding-left: var(--spacing-xs);
        }

        .contact-info {
            list-style: none;
        }

        .contact-info li {
            margin-bottom: var(--spacing-lg);
            display: flex;
            align-items: flex-start;
            gap: var(--spacing-md);
        }

        .contact-info i {
            color: var(--secondary);
            margin-top: var(--spacing-xs);
            flex-shrink: 0;
        }

        .social-links {
            display: flex;
            gap: var(--spacing-md);
            margin-top: var(--spacing-lg);
        }

        .social-links a {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 44px;
            height: 44px;
            background-color: rgba(255, 255, 255, 0.1);
            border-radius: var(--radius-round);
            transition: var(--transition-normal);
            color: var(--white);
        }

        .social-links a:hover {
            background-color: var(--secondary);
            transform: translateY(-3px);
        }

        .copyright {
            text-align: center;
            padding-top: var(--spacing-lg);
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            font-size: var(--font-size-sm);
            color: rgba(255, 255, 255, 0.7);
        }

        /* Responsive Design */
        @media (max-width: 1200px) {
            :root {
                --font-size-display: 2.5rem;
                --font-size-xxxl: 1.75rem;
            }
            
            .container {
                width: 95%;
            }
        }

        @media (max-width: 992px) {
            :root {
                --font-size-display: 2rem;
                --font-size-xxxl: 1.5rem;
            }
            
            .about-content {
                flex-direction: column;
                gap: var(--spacing-xl);
            }
            
            .dashboard-content {
                grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            }
            
            .hero {
                min-height: 500px;
            }
            
            .payment-methods {
                grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            }
        }

        @media (max-width: 768px) {
            :root {
                --font-size-display: 1.75rem;
                --font-size-xxxl: 1.25rem;
                --font-size-xxl: 1.125rem;
                --header-height: 70px;
            }
            
            .navbar {
                flex-direction: column;
                align-items: flex-start;
                padding: var(--spacing-md) 0;
            }
            
            .nav-links {
                flex-direction: column;
                gap: 0;
                width: 100%;
                max-height: 0;
                overflow: hidden;
                transition: max-height 0.3s ease;
                margin-top: var(--spacing-md);
            }
            
            .nav-links.active {
                max-height: 500px;
            }
            
            .nav-links li {
                width: 100%;
            }
            
            .nav-links a {
                display: block;
                padding: var(--spacing-md) 0;
                border-bottom: 1px solid var(--gray-light);
            }
            
            .mobile-menu-btn {
                display: flex;
                position: absolute;
                top: var(--spacing-md);
                right: 0;
            }
            
            .hero h1 {
                font-size: var(--font-size-xxxl);
            }
            
            .hero p {
                font-size: var(--font-size-base);
            }
            
            .form-row {
                flex-direction: column;
                gap: 0;
            }
            
            .form-container {
                padding: var(--spacing-lg);
            }
            
            .hero-buttons {
                flex-direction: column;
                align-items: center;
            }
            
            .hero-buttons .btn {
                width: 100%;
                max-width: 300px;
            }
            
            .section {
                padding: var(--spacing-xl) 0;
            }
            
            .toast {
                left: var(--spacing-md);
                right: var(--spacing-md);
                max-width: none;
            }
            
            .dashboard-content {
                grid-template-columns: 1fr;
            }
            
            .payment-methods {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 576px) {
            :root {
                --font-size-display: 1.5rem;
                --spacing-xxl: 2rem;
                --spacing-xl: 1.5rem;
            }
            
            .section-title h2 {
                font-size: var(--font-size-xxl);
            }
            
            .hero {
                padding: var(--spacing-xl) 0;
                min-height: 400px;
            }
            
            .dashboard-card {
                padding: var(--spacing-md);
            }
            
            .days-count {
                font-size: 3rem;
            }
            
            .programs-grid,
            .features-grid {
                grid-template-columns: 1fr;
            }
            
            .update-controls {
                flex-direction: column;
            }
            
            .update-input {
                width: 100%;
            }
            
            .bank-info {
                flex-direction: column;
                align-items: flex-start;
            }
            
            .bank-label {
                min-width: 100%;
                margin-bottom: var(--spacing-xs);
            }
        }

        /* Print Styles */
        @media print {
            .no-print {
                display: none !important;
            }
            
            body {
                background-color: white;
                color: black;
                font-size: 12pt;
            }
            
            .hero, .features, .registration, footer {
                display: none;
            }
            
            .dashboard {
                display: block !important;
                min-height: auto;
                background-color: white;
            }
            
            .dashboard-header {
                background: white !important;
                color: black !important;
                padding: 0;
                margin-bottom: var(--spacing-lg);
            }
            
            .dashboard-header h2 {
                color: black !important;
            }
            
            .dashboard-card {
                box-shadow: none;
                border: 1px solid var(--gray-light);
                page-break-inside: avoid;
            }
            
            .btn {
                display: none !important;
            }
            
            .admin-controls {
                display: none !important;
            }
        }
    </style>
</head>
<body>
    <!-- Skip to Content -->
    <a href="#main-content" class="skip-to-content sr-only">Үндсэн агуулга руу алгасах</a>

    <!-- Header -->
    <header>
        <div class="container">
            <nav class="navbar" aria-label="Гол цэс">
                <a href="#" class="logo" aria-label="Neurosun Academy лого">
                    <img src="https://scontent.fuln4-2.fna.fbcdn.net/v/t39.30808-6/457514844_1061801679281868_1579251696753935396_n.jpg?_nc_cat=107&ccb=1-7&_nc_sid=6ee11a&_nc_ohc=MUKSdvo2JEsQ7kNvwHD_0b-&_nc_oc=AdkZBx6sDBRdfZmXL8YROGmyVY_kZyfjwHsj_5GRFp1X5qaue3KtArGMQd8Dk7ojX1A&_nc_zt=23&_nc_ht=scontent.fuln4-2.fna&_nc_gid=QF0GWlwE62QYY9W1aKVB0g&oh=00_AflNBahWf-omcEqFYg2uq1BTO6I2FgRE7dlwUxTMEAI3Bw&oe=69495071" alt="Neurosun Academy Logo" class="logo-img">
                    <div class="logo-text">
                        <h1>Neurosun Academy</h1>
                        <span>Тархины хөгжлийн төв</span>
                    </div>
                </a>
                
                <button class="mobile-menu-btn" aria-label="Цэс нээх" aria-expanded="false" aria-controls="main-nav">
                    <i class="fas fa-bars"></i>
                </button>
                
                <ul class="nav-links" id="main-nav">
                    <li><a href="#about" class="nav-link">Бидний тухай</a></li>
                    <li><a href="#features" class="nav-link">Үйлчилгээ</a></li>
                    <li><a href="#programs" class="nav-link">Хөтөлбөрүүд</a></li>
                    <li><a href="#registration" class="nav-link">Бүртгүүлэх</a></li>
                    <li><a href="#loginModal" class="nav-link" data-modal="loginModal">Нэвтрэх</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <!-- Hero Section -->
    <section class="hero" id="main-content">
        <div class="container">
            <div class="hero-content">
                <h1>Хүүхдийн тархины хөгжлийн сургалт</h1>
                <p>Neurosun Academy нь нейро шинжлэх ухаанд суурилсан хүүхдийн тархины хөгжил болон суралцах ур чадварыг хүүхэд бүрийн онцлогт тулгуурлан хөгжүүлдэг цогц сургалтын төв юм.</p>
                <div class="hero-buttons">
                    <a href="#registration" class="btn btn-lg">Бүртгүүлэх</a>
                    <a href="#programs" class="btn btn-primary btn-lg">Хөтөлбөрүүд</a>
                </div>
            </div>
        </div>
    </section>

    <!-- About Section -->
    <section id="about" class="section about">
        <div class="container">
            <div class="section-title">
                <h2>Бидний тухай</h2>
                <p>Neurosun Academy нь хүүхдийн тархины хөгжил, суралцах ур чадварыг түүний онцлогт тохируулан нейро дэмжин ажилладаг.</p>
            </div>
            <div class="about-content">
                <div class="about-text">
                    <p>Манай сургалтууд нь хүүхдүүдийн анхаарал төвлөрөх чадвар, ой тогтоолт, бодол санааны үйл ажиллагааг сайжруулахад чиглэгдсэн. Бид дэлгэцийн хамааралтай асуудалтай хүүхдүүдэд тусгайлан зориулсан хөтөлбөрүүдийг санал болгодог.</p>
                    <p>Манай арга барил нь шинжлэх ухаанд суурилсан бөгөөд хүүхдийн тархины нейропластик чадварыг ашиглан тэдний оюуны чадварыг хөгжүүлдэг. Сургалтын хөтөлбөр нь хүүхдийн нас, хэрэгцээнд тохируулан өөрчлөгдөж, тусгайлан бэлтгэгдсэн дасгалуудаас бүрддэг.</p>
                    <p>Бид хүүхдийн хөгжлийн шинжлэх ухааны хамгийн сүүлийн үеийн судалгаануудыг ашиглан, хүүхдүүдэд хамгийн үр дүнтэй сургалтын аргыг санал болгодог.</p>
                    <a href="#registration" class="btn btn-primary">Үнэгүй зөвлөгөө авах</a>
                </div>
                <div class="about-image">
                    <div class="placeholder-image" style="background: linear-gradient(135deg, var(--primary), var(--secondary)); height: 400px; display: flex; align-items: center; justify-content: center; color: white; padding: 2rem;">
                        <div style="text-align: center;">
                            <i class="fas fa-brain" style="font-size: 4rem; margin-bottom: 1rem;"></i>
                            <h3 style="color: white; margin-bottom: 1rem;">хүүхдийн сургалтын төв</h3>
                            <p>Хүүхдийн тархины бүх талыг хөгжүүлэх шинжлэх ухаанд суурилсан сургалт</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Features Section -->
    <section id="features" class="section features">
        <div class="container">
            <div class="section-title">
                <h2>Бидний үйлчилгээ</h2>
                <p>Бид хүүхдүүдэд тархины хөгжлийн бүх талыг хамарсан цогц үйлчилгээг санал болгодог</p>
            </div>
            <div class="features-grid">
                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="fas fa-brain"></i>
                    </div>
                    <h3>Суралцах арга зүйн оношилгоо(эмнэлзүйн оношилгоо биш)</h3>
                    <p>Хүүхдийн тархины хөгжлийн түвшинг нарийвчлан үнэлж, сул талуудыг тодорхойлох.</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="fas fa-bullseye"></i>
                    </div>
                    <h3>Анхаарал төвлөрөх сургалт</h3>
                    <p>Хүүхдийн анхаарал төвлөрөх чадварыг сайжруулж, сургалт, хичээл дээр илүү сайн анхаарч чаддаг болгох.</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="fas fa-memory"></i>
                    </div>
                    <h3>Ой тогтоолтын сургалт</h3>
                    <p>Ой тогтоолтын чадварыг хөгжүүлж, мэдээлэл илүү хурдан, үр дүнтэй санах боломжийг бий болгох.</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="fas fa-desktop"></i>
                    </div>
                    <h3>Дэлгэцийн хамаарлын </h3>
                    <p>Дэлгэцийн хамааралтай хүүхдүүдэд зориулсан тусгай хөтөлбөрүүдийг санал болгох.</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="fas fa-user-friends"></i>
                    </div>
                    <h3>Харилцах ур чадварын сургалт</h3>
                    <p>Хүүхдүүдийн нийгмийн харилцаа, харилцан ярилцлага, нөхөрсөг харилцааны чадварыг хөгжүүлэх.</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="fas fa-chart-line"></i>
                    </div>
                    <h3>Ахиц дэвшлийн хяналт</h3>
                    <p>Хүүхдийн ахиц дэвшлийг тогтмол хянаж, сургалтын хөтөлбөрийг хувь хүнд тохируулах.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Programs Section -->
    <section id="programs" class="section programs">
        <div class="container">
            <div class="section-title">
                <h2>Сургалтын хөтөлбөрүүд</h2>
                <p>Хүүхдийн нас, хэрэгцээнд тохирсон сургалтын хөтөлбөрүүд</p>
            </div>
            <div class="programs-grid">
                <div class="program-card">
                    <div class="program-image">
                        <div class="placeholder-image" style="background: linear-gradient(135deg, var(--primary), var(--primary-light)); height: 100%; display: flex; align-items: center; justify-content: center; color: white; position: relative;">
                            <span class="program-badge">Хамгийн их сонгогддог</span>
                            <i class="fas fa-bullseye" style="font-size: 4rem;"></i>
                        </div>
                    </div>
                    <div class="program-content">
                        <h3>Тархины шинжилгээ BGA(эмнэлзүйн оношилгоо биш)</h3>
                        <p>Хүүхдийн тархины хөгжлийн түвшинг нарийвчлан үнэлж, сул талуудыг тодорхойлох.</p>
                        <div class="program-price">190'000₮/1 удаа</div>
                        <ul class="program-features">
                            <li><i class="fas fa-check"></i> Суурь 5 чадварын мэдээлэл </li>
                            <li><i class="fas fa-check"></i> Тархины үелзэлийн хэмжээ тодорхойлох</li>
                            <li><i class="fas fa-check"></i> Мэргэжил сонголт болон спортын чиглэл</li>
                            <li><i class="fas fa-check"></i> Баруун, Зүүн тархины давамгайлал
                            
                        </ul>
                        <button class="btn btn-block" data-program="attention" data-action="register">Бүртгүүлэх</button>
                    </div>
                </div>
                <div class="program-card">
                    <div class="program-image">
                        <div class="placeholder-image" style="background: linear-gradient(135deg, var(--secondary), var(--secondary-light)); height: 100%; display: flex; align-items: center; justify-content: center; color: white;">
                            <i class="fas fa-memory" style="font-size: 4rem;"></i>
                        </div>
                    </div>
                    <div class="program-content">
                        <h3>Унших ур чадварын сургалт</h3>
                        <p>Ой тогтоолтын чадварыг сайжруулах, мэдээлэл санах арга барилыг заах сургалт.</p>
                        <div class="program-price">Онлайн 130'000₮/сар</div>
                        <div class="program-price">Танхим 450'000₮/сар</div>
                        <ul class="program-features">
                            <li><i class="fas fa-check"></i> 6 настнуудын анги</li>
                            <li><i class="fas fa-check"></i> 7-8 настнуудын анги </li>
                            <li><i class="fas fa-check"></i> 9-10 настнуудын анги</li>
                            <li><i class="fas fa-check"></i> 11-12 настнуудын анги</li>
                             <li><i class="fas fa-check"></i> Танхим болон Онлайн</li>
                             <li><i class="fas fa-check"></i> 7 хоногийн 2 болон 4 оролт</li>
                        </ul>
                        <button class="btn btn-block" data-program="memory" data-action="register">Бүртгүүлэх</button>
                    </div>
                </div>
                <div class="program-card featured">
                    <div class="program-image">
                        <div class="placeholder-image" style="background: linear-gradient(135deg, var(--success), #5cb85c); height: 100%; display: flex; align-items: center; justify-content: center; color: white;">
                            <span class="program-badge">Шинэ</span>
                            <i class="fas fa-star" style="font-size: 4rem;"></i>
                        </div>
                    </div>
                    <div class="program-content">
                        <h3>Ганцаарчилсан сургалт</h3>
                        <p>Анхаарал төвлөрөлт, ой тогтоолт, нийгмийн чадварыг нэгтгэсэн цогц хөтөлбөр.</p>
                        <div class="program-price">900'000-1'500'000₮/сар</div>
                        <ul class="program-features">
                            <li><i class="fas fa-check"></i> Тархины шинжилгээ</li>
                            <li><i class="fas fa-check"></i> Анхаарал төвлөрөх дасгал</li>
                            <li><i class="fas fa-check"></i> Ой тогтоолтын дасгал</li>
                            <li><i class="fas fa-check"></i> Баруун, Зүүн тархины дасгал</li>
                            <li><i class="fas fa-check"></i> Долоо хоногт 4 удаагийн сургалт</li>
                        </ul>
                        <button class="btn btn-block" data-program="comprehensive" data-action="register">Бүртгүүлэх</button>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Registration Section -->
    <section id="registration" class="section registration">
        <div class="container">
            <div class="section-title">
                <h2>Бүртгүүлэх</h2>
                <p>Дараах маягтыг бөглөж, хүүхдээ сургалтад бүртгүүлнэ үү</p>
            </div>
            <div class="form-container">
                <form id="registrationForm" novalidate>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="childName" class="required">Хүүхдийн нэр</label>
                            <input type="text" id="childName" name="childName" required placeholder="Хүүхдийн бүтэн нэр">
                            <div class="error-message">Хүүхдийн нэрийг оруулна уу</div>
                        </div>
                        <div class="form-group">
                            <label for="birthDate" class="required">Төрсөн огноо</label>
                            <input type="date" id="birthDate" name="birthDate" required max="2023-12-31">
                            <div class="error-message">Төрсөн огноог оруулна уу</div>
                            <small class="form-help">Хүүхдийн төрсөн он сар өдөр</small>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="parentName" class="required">Эцэг/эхийн нэр</label>
                            <input type="text" id="parentName" name="parentName" required placeholder="Эцэг эхийн нэр">
                            <div class="error-message">Эцэг/эхийн нэрийг оруулна уу</div>
                        </div>
                        <div class="form-group">
                            <label for="phone" class="required">Утасны дугаар</label>
                            <input type="tel" id="phone" name="phone" required pattern="[0-9]{8}" placeholder="99999999">
                            <div class="error-message">8 оронтой утасны дугаар оруулна уу</div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="email" class="required">Имэйл хаяг</label>
                        <input type="email" id="email" name="email" required placeholder="таны@имэйл.хаяг">
                        <div class="error-message">Зөв имэйл хаяг оруулна уу</div>
                    </div>
                    <div class="form-group">
                        <label for="program" class="required">Сонгох хөтөлбөр</label>
                        <select id="program" name="program" required>
                            <option value="">Хөтөлбөр сонгох</option>
                            <option value="attention">Тархины шинжилгээ 190,000₮/сар</option>
                            <option value="memory">Унших ур чадварын онлайн сургалт - 130,000₮/сар</option>
                            <option value="memory">Унших ур чадварын танхимын сургалт - 450,000₮/сар</option>
                            <option value="comprehensive">Ганцаарчилсан сургалт - 350,000₮/сар</option>
                        </select>
                        <div class="error-message">Хөтөлбөр сонгоно уу</div>
                    </div>
                    <div class="form-group">
                        <label for="message">Нэмэлт мэдээлэл</label>
                        <textarea id="message" name="message" rows="4" placeholder="Хүүхдийн тухай нэмэлт мэдээлэл, асуулт, санал гэх мэт..."></textarea>
                        <small class="form-help">Заавал биш талбар</small>
                    </div>
                    <div class="form-group">
                        <label style="display: flex; align-items: flex-start; gap: var(--spacing-sm); cursor: pointer;">
                            <input type="checkbox" id="agreeTerms" name="agreeTerms" required style="margin-top: 3px;">
                            <span>Би <a href="#" style="color: var(--primary);">Үйлчилгээний нөхцөл</a>-ийг уншиж, зөвшөөрч байна</span>
                        </label>
                        <div class="error-message">Үйлчилгээний нөхцлийг зөвшөөрнө үү</div>
                    </div>
                    <button type="submit" class="btn btn-primary btn-block" id="submitBtn">
                        <span>Бүртгүүлэх</span>
                        <span class="spinner spinner-sm" style="display: none;"></span>
                    </button>
                </form>
            </div>
            
            <!-- Payment Section -->
            <div class="payment-section" id="paymentSection" style="display: none;">
                <div class="section-title">
                    <h2>Төлбөр төлөх</h2>
                    <p>Дараах аргуудаар төлбөрөө төлнө үү</p>
                </div>
                
                <div class="payment-methods">
                    <div class="payment-method active" data-method="bank">
                        <i class="fas fa-university"></i>
                        <h3>Банкны шилжүүлэг</h3>
                        <p>Дансаар шууд шилжүүлэх</p>
                    </div>
                    <div class="payment-method" data-method="qr">
                        <i class="fas fa-qrcode"></i>
                        <h3>QR код</h3>
                        <p>QR код уншуулан төлөх</p>
                    </div>
                    <div class="payment-method" data-method="mobile">
                        <i class="fas fa-mobile-alt"></i>
                        <h3>Мобайл банк</h3>
                        <p>Гар утсаар төлөх</p>
                    </div>
                </div>
                
                <!-- Bank Transfer Details -->
                <div class="bank-details" id="bankDetails">
                    <h3><i class="fas fa-university"></i> Банкны мэдээлэл</h3>
                    <div class="bank-info">
                        <div class="bank-label">Банкны нэр:</div>
                        <div class="bank-value">ХААН Банк</div>
                    </div>
                    <div class="bank-info">
                        <div class="bank-label">Дансны дугаар:</div>
                        <div class="bank-value">5315254103</div>
                    </div>
                    <div class="bank-info">
                        <div class="bank-label">Дансны нэр:</div>
                        <div class="bank-value">Цэнд Чанцалдулам</div>
                    </div>
                    <div class="bank-info">
                        <div class="bank-label">Хаан банкны код:</div>
                        <div class="bank-value">2700500</div>
                    </div>
                    <div class="bank-info">
                        <div class="bank-label">Swift код:</div>
                        <div class="bank-value">Khaan Bank</div>
                    </div>
                    
                    <div class="qr-code" id="qrCode" style="display: none;">
                        <h4>QR код уншуулан төлөх</h4>
                        <div class="placeholder-image" style="background: #f5f5f5; padding: 2rem; border-radius: 10px; display: inline-block;">
                            <i class="fas fa-qrcode" style="font-size: 8rem; color: var(--primary);"></i>
                        </div>
                        <p style="margin-top: 1rem; font-size: 0.9rem; color: var(--gray);">
                            QR код уншуулан төлбөрөө төлнө үү
                        </p>
                    </div>
                    
                    <div class="mobile-payment" id="mobilePayment" style="display: none; text-align: center; padding: 2rem;">
                        <h4><i class="fas fa-mobile-alt"></i> Мобайл банкаар төлөх</h4>
                        <p>Утасны дугаар: <strong>99966059</strong></p>
                        <p>Төлбөрийн нэр: <strong>Neurosun Academy</strong></p>
                        <div style="margin-top: 1.5rem;">
                            <button class="btn btn-primary">
                                <i class="fas fa-sms"></i> Төлбөрийн линк авах
                            </button>
                        </div>
                    </div>
                    
                    <div class="payment-instructions" style="margin-top: 2rem; padding: 1.5rem; background-color: var(--warning-light); border-radius: var(--radius-md);">
                        <h4><i class="fas fa-info-circle"></i> Чухал мэдээлэл</h4>
                        <ul style="margin-top: 1rem;">
                            <li>Төлбөр төлөхдөө таны бүртгэлийн дугаарыг гүйлгээний утгад бичнэ үү</li>
                            <li>Төлбөр төлсний дараа гүйлгээний баримтаа хадгална уу</li>
                            <li>Төлбөр баталгаажсны дараа таны бүртгэл идэвхжинэ</li>
                            <li>Асуулт гарвал утас: 99966059, 90275111</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Login Modal -->
    <div id="loginModal" class="modal" aria-hidden="true" role="dialog" aria-labelledby="loginModalTitle">
        <div class="modal-content">
            <button class="close-modal" aria-label="Хаах">&times;</button>
            <h3 id="loginModalTitle">Нэвтрэх</h3>
            <form id="loginForm" novalidate>
                <div class="form-group">
                    <label for="loginEmail" class="required">Имэйл хаяг</label>
                    <input type="email" id="loginEmail" name="loginEmail" required placeholder="таны@имэйл.хаяг">
                    <div class="error-message">Зөв имэйл хаяг оруулна уу</div>
                </div>
                <div class="form-group">
                    <label for="loginPassword" class="required">Нууц үг</label>
                    <input type="password" id="loginPassword" name="loginPassword" required placeholder="Нууц үг">
                    <div class="error-message">Нууц үгээ оруулна уу</div>
                </div>
                <button type="submit" class="btn btn-primary btn-block">
                    <span>Нэвтрэх</span>
                    <span class="spinner spinner-sm" style="display: none;"></span>
                </button>
            </form>
        </div>
    </div>

    <!-- Registration Success Modal -->
    <div id="registrationSuccessModal" class="modal" aria-hidden="true" role="dialog" aria-labelledby="registrationSuccessTitle">
        <div class="modal-content">
            <button class="close-modal" aria-label="Хаах">&times;</button>
            <h3 id="registrationSuccessTitle">Бүртгэл амжилттай</h3>
            <div class="credentials-display" id="credentialsDisplay">
                <!-- Нэвтрэх эрхүүд энд харуулагдана -->
            </div>
            <p style="margin-top: var(--spacing-lg);">Таны бүртгэл админы баталгаажуулалт хүлээж байна. Баталгаажсны дараа та өөрийн нэвтрэх эрхээр системд нэвтэрч болно.</p>
            <div class="dashboard-actions" style="margin-top: var(--spacing-lg);">
                <button class="btn btn-primary" id="closeSuccessModalBtn">Хаах</button>
                <button class="btn btn-outline" id="printCredentialsBtn"><i class="fas fa-print"></i> Хэвлэх</button>
            </div>
        </div>
    </div>

    <!-- Dashboard Section -->
    <section id="dashboard" class="dashboard" aria-labelledby="dashboardTitle">
        <div class="dashboard-header">
            <div class="container">
                <h2 id="dashboardTitle">Хувийн кабинет</h2>
                <p>Хүүхдийн сургалтын ахиц, тархины долгион, танин мэдэхүйн чадварын үзүүлэлтүүд</p>
            </div>
        </div>
        <div class="container">
            <div class="dashboard-content">
                <div class="dashboard-card">
                    <h3><i class="fas fa-user"></i> Хүүхдийн мэдээлэл</h3>
                    <div class="student-details" id="studentDetails">
                        <!-- JavaScript энд өгөгдөл оруулна -->
                    </div>
                </div>
                
                <div class="dashboard-card">
                    <h3><i class="fas fa-brain"></i> Тархины долгионы үзүүлэлт</h3>
                    <div id="brainwaveChart" class="chart-container">
                        <div class="brainwave-chart" id="brainwaveVisualization">
                            <!-- Tархины долгионы диаграмм энд үүснэ -->
                        </div>
                        <div class="brainwave-legend">
                            <div class="legend-item">
                                <div class="legend-color" style="background-color: var(--chart-alpha);"></div>
                                <span>Alpha (8-12 Hz)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background-color: var(--chart-beta);"></div>
                                <span>Beta (12-30 Hz)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background-color: var(--chart-gamma);"></div>
                                <span>Gamma (30-100 Hz)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background-color: var(--chart-theta);"></div>
                                <span>Theta (4-8 Hz)</span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="dashboard-card">
                    <h3><i class="fas fa-chart-bar"></i> Танин мэдэхүйн чадвар</h3>
                    <div id="cognitiveChart" class="chart-container">
                        <!-- Танин мэдэхүйн чадварын диаграмм энд үүснэ -->
                    </div>
                </div>
                
                <div class="dashboard-card">
                    <h3><i class="fas fa-tachometer-alt"></i> Суралцах хурд</h3>
                    <div id="learningSpeedChart" class="chart-container">
                        <!-- Суралцах хурдны диаграмм энд үүснэ -->
                    </div>
                </div>
                
                <div class="dashboard-card">
                    <h3><i class="fas fa-chart-line"></i> Ахиц дэвшил</h3>
                    <div class="progress-item">
                        <div class="progress-info">
                            <span class="progress-label">Анхаарал төвлөрөх чадвар</span>
                            <span class="progress-value" id="attentionPercent">0%</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill" id="attentionProgress" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
                        </div>
                    </div>
                    <div class="progress-item">
                        <div class="progress-info">
                            <span class="progress-label">Ой тогтоолтын чадвар</span>
                            <span class="progress-value" id="memoryPercent">0%</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill" id="memoryProgress" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
                        </div>
                    </div>
                    <div class="progress-item">
                        <div class="progress-info">
                            <span class="progress-label">Бодол санааны хурд</span>
                            <span class="progress-value" id="speedPercent">0%</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill" id="speedProgress" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
                        </div>
                    </div>
                    <div class="progress-item">
                        <div class="progress-info">
                            <span class="progress-label">Нийгмийн харилцаа</span>
                            <span class="progress-value" id="socialPercent">0%</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill" id="socialProgress" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
                        </div>
                    </div>
                </div>
                
                <div class="dashboard-card remaining-days-card">
                    <h3><i class="fas fa-calendar-alt"></i> Үлдэгдэл хоног</h3>
                    <div class="days-count" id="remainingDays">0</div>
                    <p>Сургалтын хугацаа дуусахад</p>
                </div>
            </div>
            
            <div class="dashboard-actions">
                <button id="logoutBtn" class="btn btn-outline">Гарах</button>
                <button id="printReportBtn" class="btn btn-primary"><i class="fas fa-print"></i> Тайлан хэвлэх</button>
                <button id="refreshDashboardBtn" class="btn btn-success"><i class="fas fa-sync-alt"></i> Шинэчлэх</button>
                <button id="adminPanelBtn" class="btn btn-admin" style="display: none;"><i class="fas fa-user-shield"></i> Админ хэсэг</button>
            </div>
        </div>
    </section>

    <!-- Admin Panel Section -->
    <section id="adminPanel" class="admin-panel" aria-labelledby="adminPanelTitle">
    <div class="admin-header">
        <div class="container">
            <h2 id="adminPanelTitle">Админ хэсэг</h2>
            <p>Бүртгүүлсэн хэрэглэгчдийг удирдах, ахиц дэвшлийг хянах систем</p>
        </div>
    </div>
    <div class="container">
        <div class="admin-content">
            <div class="admin-card">
                <h3><i class="fas fa-user-clock"></i> Баталгаажуулах шаардлага</h3>
                <div class="users-list" id="pendingRegistrations">
                    <!-- Хүлээгдэж буй бүртгэлүүд энд үүснэ -->
                </div>
            </div>
            
            <div class="admin-card">
                <h3><i class="fas fa-users"></i> Бүртгүүлсэн хэрэглэгчид</h3>
                <div class="users-list" id="adminUsersList">
                    <!-- Хэрэглэгчдийн жагсаалт энд үүснэ -->
                </div>
            </div>
            
            <div class="admin-card">
                <h3><i class="fas fa-user"></i> Сонгогдсон хэрэглэгчийн мэдээлэл</h3>
                <div id="adminUserDetails">
                    <p class="text-gray">Хэрэглэгч сонгоно уу</p>
                </div>
            </div>
            
            <div class="admin-card">
                <h3><i class="fas fa-chart-line"></i> Ахиц дэвшлийн мэдээлэл</h3>
                <div id="adminProgressInfo">
                    <p class="text-gray">Хэрэглэгч сонгоно уу</p>
                </div>
            </div>
            
            <div class="admin-card">
                <h3><i class="fas fa-edit"></i> Бүртгэл баталгаажуулах</h3>
                <div id="registrationApprovalForm">
                    <p class="text-gray">Баталгаажуулах хэрэглэгч сонгоно уу</p>
                </div>
            </div>
            
            <!-- Шинэ: Ахиц дэвшлийг өөрчлөх хэсэг -->
            <div class="admin-card">
                <h3><i class="fas fa-sliders-h"></i> Ахиц дэвшлийг удирдах</h3>
                <div id="progressManagement">
                    <p class="text-gray">Хэрэглэгч сонгоно уу</p>
                </div>
            </div>
        </div>
        
        <div class="dashboard-actions">
            <button id="backToDashboardBtn" class="btn btn-primary"><i class="fas fa-arrow-left"></i> Кабинет руу буцах</button>
            <button id="exportUsersBtn" class="btn btn-success"><i class="fas fa-download"></i> Хэрэглэгчид экспортлох</button>
            <button id="refreshAdminPanelBtn" class="btn btn-secondary"><i class="fas fa-sync-alt"></i> Шинэчлэх</button>
        </div>
    </div>
</section>
    <section id="adminPanel" class="admin-panel" aria-labelledby="adminPanelTitle">
        <div class="admin-header">
            <div class="container">
                <h2 id="adminPanelTitle">Админ хэсэг</h2>
                <p>Бүртгүүлсэн хэрэглэгчдийг удирдах, ахиц дэвшлийг хянах систем</p>
            </div>
        </div>
        <div class="container">
            <div class="admin-content">
                <div class="admin-card">
                    <h3><i class="fas fa-user-clock"></i> Баталгаажуулах шаардлага</h3>
                    <div class="users-list" id="pendingRegistrations">
                        <!-- Хүлээгдэж буй бүртгэлүүд энд үүснэ -->
                    </div>
                </div>
                
                <div class="admin-card">
                    <h3><i class="fas fa-users"></i> Бүртгүүлсэн хэрэглэгчид</h3>
                    <div class="users-list" id="adminUsersList">
                        <!-- Хэрэглэгчдийн жагсаалт энд үүснэ -->
                    </div>
                </div>
                
                <div class="admin-card">
                    <h3><i class="fas fa-user"></i> Сонгогдсон хэрэглэгчийн мэдээлэл</h3>
                    <div id="adminUserDetails">
                        <p class="text-gray">Хэрэглэгч сонгоно уу</p>
                    </div>
                </div>
                
                <div class="admin-card">
                    <h3><i class="fas fa-chart-line"></i> Ахиц дэвшлийн мэдээлэл</h3>
                    <div id="adminProgressInfo">
                        <p class="text-gray">Хэрэглэгч сонгоно уу</p>
                    </div>
                </div>
                
                <div class="admin-card">
                    <h3><i class="fas fa-edit"></i> Бүртгэл баталгаажуулах</h3>
                    <div id="registrationApprovalForm">
                        <p class="text-gray">Баталгаажуулах хэрэглэгч сонгоно уу</p>
                    </div>
                </div>
            </div>
            
            <div class="dashboard-actions">
                <button id="backToDashboardBtn" class="btn btn-primary"><i class="fas fa-arrow-left"></i> Кабинет руу буцах</button>
                <button id="exportUsersBtn" class="btn btn-success"><i class="fas fa-download"></i> Хэрэглэгчид экспортлох</button>
                <button id="refreshAdminPanelBtn" class="btn btn-secondary"><i class="fas fa-sync-alt"></i> Шинэчлэх</button>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="no-print">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>Neurosun Academy</h3>
                    <p>Хүүхдийн тархины хөгжлийн сургалтын төв. Бид хүүхдүүдийн ирээдүйг тэдний тархины хөгжлөөр бүтээдэг.</p>
                    <div class="social-links">
                        <a href="https://facebook.com/neurosun.academy" aria-label="Facebook" target="_blank" rel="noopener"><i class="fab fa-facebook-f"></i></a>
                        <a href="https://instagram.com/neurosun.academy" aria-label="Instagram" target="_blank" rel="noopener"><i class="fab fa-instagram"></i></a>
                        <a href="https://twitter.com/neurosun" aria-label="Twitter" target="_blank" rel="noopener"><i class="fab fa-twitter"></i></a>
                        <a href="https://youtube.com/@neurosunacademy" aria-label="YouTube" target="_blank" rel="noopener"><i class="fab fa-youtube"></i></a>
                    </div>
                </div>
                <div class="footer-section">
                    <h3>Холбоос</h3>
                    <ul class="footer-links">
                        <li><a href="#about">Бидний тухай</a></li>
                        <li><a href="#features">Үйлчилгээ</a></li>
                        <li><a href="#programs">Хөтөлбөрүүд</a></li>
                        <li><a href="#registration">Бүртгүүлэх</a></li>
                        <li><a href="#" data-modal="termsModal">Үйлчилгээний нөхцөл</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h3>Холбоо барих</h3>
                    <ul class="contact-info">
                        <li>
                            <i class="fas fa-map-marker-alt"></i>
                            <span>Улаанбаатар хот, Чингэлтэй дүүрэг, 3-р хороо, Авзага 18-р байр</span>
                        </li>
                        <li>
                            <i class="fas fa-phone"></i>
                            <span>+(976) 99966059</span>
                        </li>
                        <li>
                            <i class="fas fa-envelope"></i>
                            <span>info@neurosunacademy.com</span>
                        </li>
                        <li>
                            <i class="fas fa-clock"></i>
                            <span>Даваа - Бямба: 09:00 - 20:00<br></span>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="copyright">
                <p>&copy; <span id="currentYear">2024</span> Neurosun Academy. Бүх эрх хуулиар хамгаалагдсан.</p>
                <p style="margin-top: 0.5rem; font-size: 0.8rem;">Хүүхдийн сургалтын төв</p>
            </div>
        </div>
    </footer>

    <!-- Toast Container -->
    <div id="toastContainer"></div>

    <!-- External JS Libraries -->
    <script src="https://cdn.jsdelivr.net/npm/toastify-js"></script>
    
    <script>
        // ============================================================================
        // CONFIGURATION
        // ============================================================================
        
        const CONFIG = {
            // Environment Detection
            ENVIRONMENT: (() => {
                const hostname = window.location.hostname;
                if (hostname.includes('localhost') || hostname === '127.0.0.1') return 'development';
                if (hostname.includes('dev.')) return 'development';
                if (hostname.includes('staging.')) return 'staging';
                if (hostname.includes('test.')) return 'testing';
                return 'production';
            })(),
            
            // EmailJS Configuration
            EMAILJS: {
                SERVICE_ID: 'service_neurosun',
                TEMPLATE_ID: 'template_registration',
                PUBLIC_KEY: 'YOUR_PUBLIC_KEY_HERE' // Replace with your actual EmailJS public key
            },
            
            // Google Analytics
            GA_TRACKING_ID: 'G-XXXXXXXXXX', // Replace with your GA tracking ID
            
            // Storage Keys
            USER_STORAGE_KEY: 'neurosun_registered_users',
            PROGRESS_STORAGE_KEY: 'neurosun_student_progress',
            AUTH_TOKEN_KEY: 'neurosun_auth_token',
            USER_DATA_KEY: 'neurosun_user_data',
            
            // Бүртгэлийн статус
            REGISTRATION_STATUS: {
                PENDING: 'pending',
                APPROVED: 'approved',
                REJECTED: 'rejected'
            },
            
            // Сургалтын төрлүүд
            TRAINING_TYPES: {
                OFFLINE: 'Танхимын сургалт',
                ONLINE: 'Онлайн сургалт',
                HYBRID: 'Холимог сургалт'
            },
            
            // Сургалтын хоног тохиргоо
            DEFAULT_TRAINING_DAYS: 90,
            
            // Bank Information
            BANK_INFO: {
                name: 'ХААН Банк',
                accountNumber: '5015 0189 71',
                accountName: 'Neurosun Academy LLC',
                bankCode: '050000',
                swiftCode: 'HNBMNUB'
            },
            
            // Test User Accounts
            TEST_USERS: [
                {
                    id: 'USR-DEV-001',
                    email: 'student.test@dev.neurosunacademy.com',
                    password: 'TestStudent123!',
                    role: 'student',
                    name: 'Тэс хэрэглэгч',
                    childName: 'Батсайхан',
                    birthDate: '2015-05-10',
                    parentName: 'Ганболд',
                    phone: '99112233',
                    program: 'Цогц хөгжлийн сургалт - 350,000₮/сар',
                    startDate: '2024-01-15',
                    endDate: '2024-07-15',
                    registrationId: 'REG-2024-001',
                    status: 'approved',
                    avatar: null,
                    brainwave: {
                        alpha: 65,
                        beta: 45,
                        gamma: 35,
                        theta: 55
                    },
                    cognitive: {
                        physical: 70,
                        attention: 75,
                        comprehension: 80,
                        sensory: 65,
                        memory: 60
                    },
                    learningSpeed: {
                        focusSpeed: 72,
                        relaxSpeed: 68,
                        sustainedAttention: 75,
                        focusIntensity: 70,
                        calmnessDepth: 65,
                        sustainedCalmness: 60
                    }
                },
                {
                    id: 'USR-ADMIN-001',
                    email: 'ellystrong22@gmail.com',
                    password: 'Anhaa$1108',
                    role: 'DEVELOPER',
                    name: 'Систем администратор',
                    childName: 'Админ',
                    birthDate: '2005-11-08',
                    parentName: 'Админ',
                    phone: '90275111',
                    program: 'Бүх хөтөлбөр',
                    startDate: '2024-01-01',
                    endDate: '2025-01-01',
                    registrationId: 'ADMIN-001',
                    status: 'approved',
                    avatar: null,
                    permissions: ['all'],
                    isAdmin: true,
                    brainwave: {
                        alpha: 100,
                        beta: 100,
                        gamma: 100,
                        theta: 100
                    },
                    cognitive: {
                        physical: 100,
                        attention: 100,
                        comprehension: 100,
                        sensory: 100,
                        memory: 100
                    },
                    learningSpeed: {
                        focusSpeed: 100,
                        relaxSpeed: 100,
                        sustainedAttention: 100,
                        focusIntensity: 100,
                        calmnessDepth: 100,
                        sustainedCalmness: 100
                    }
                }
            ]
        };
        
        // ============================================================================
        // APPLICATION STATE
        // ============================================================================
        
        const AppState = {
            isLoggedIn: false,
            currentUser: null,
            authToken: localStorage.getItem(CONFIG.AUTH_TOKEN_KEY) || null,
            userData: JSON.parse(localStorage.getItem(CONFIG.USER_DATA_KEY)) || null,
            activeModal: null,
            isLoading: false,
            isOnline: navigator.onLine,
            isAdmin: false,
            selectedAdminUser: null,
            cache: {
                userProfile: null,
                progressData: null,
                sessions: null,
                brainwaveData: null,
                cognitiveData: null,
                learningSpeedData: null,
                lastUpdated: null
            }
        };
        
        // ============================================================================
        // DOM ELEMENTS
        // ============================================================================
        
        const DOM = {
            // Main elements
            body: document.body,
            header: document.querySelector('header'),
            
            // Navigation
            mobileMenuBtn: document.querySelector('.mobile-menu-btn'),
            navLinks: document.querySelector('.nav-links'),
            
            // Modals
            loginModal: document.getElementById('loginModal'),
            registrationSuccessModal: document.getElementById('registrationSuccessModal'),
            
            // Forms
            loginForm: document.getElementById('loginForm'),
            registrationForm: document.getElementById('registrationForm'),
            
            // Dashboard elements
            dashboard: document.getElementById('dashboard'),
            studentDetails: document.getElementById('studentDetails'),
            remainingDays: document.getElementById('remainingDays'),
            
            // Admin Panel elements
            adminPanel: document.getElementById('adminPanel'),
            pendingRegistrations: document.getElementById('pendingRegistrations'),
            adminUsersList: document.getElementById('adminUsersList'),
            adminUserDetails: document.getElementById('adminUserDetails'),
            adminProgressInfo: document.getElementById('adminProgressInfo'),
            registrationApprovalForm: document.getElementById('registrationApprovalForm'),
            
            // Payment Elements
            paymentSection: document.getElementById('paymentSection'),
            bankDetails: document.getElementById('bankDetails'),
            qrCode: document.getElementById('qrCode'),
            mobilePayment: document.getElementById('mobilePayment'),
            paymentMethods: document.querySelectorAll('.payment-method'),
            
            // Success Modal
            credentialsDisplay: document.getElementById('credentialsDisplay'),
            closeSuccessModalBtn: document.getElementById('closeSuccessModalBtn'),
            printCredentialsBtn: document.getElementById('printCredentialsBtn'),
            
            // Charts
            brainwaveChart: document.getElementById('brainwaveChart'),
            cognitiveChart: document.getElementById('cognitiveChart'),
            learningSpeedChart: document.getElementById('learningSpeedChart'),
            brainwaveVisualization: document.getElementById('brainwaveVisualization'),
            
            // Admin controls
            adminPanelBtn: document.getElementById('adminPanelBtn'),
            backToDashboardBtn: document.getElementById('backToDashboardBtn'),
            exportUsersBtn: document.getElementById('exportUsersBtn'),
            refreshAdminPanelBtn: document.getElementById('refreshAdminPanelBtn'),
            
            // Progress bars
            attentionProgress: document.getElementById('attentionProgress'),
            memoryProgress: document.getElementById('memoryProgress'),
            speedProgress: document.getElementById('speedProgress'),
            socialProgress: document.getElementById('socialProgress'),
            attentionPercent: document.getElementById('attentionPercent'),
            memoryPercent: document.getElementById('memoryPercent'),
            speedPercent: document.getElementById('speedPercent'),
            socialPercent: document.getElementById('socialPercent'),
            
            // Buttons
            logoutBtn: document.getElementById('logoutBtn'),
            printReportBtn: document.getElementById('printReportBtn'),
            refreshDashboardBtn: document.getElementById('refreshDashboardBtn'),
            submitBtn: document.getElementById('submitBtn'),
            
            // Footer
            currentYear: document.getElementById('currentYear'),
            
            // Toast container
            toastContainer: document.getElementById('toastContainer')
        };
        
        // ============================================================================
        // UTILITY FUNCTIONS
        // ============================================================================
        
        class Utils {
            static formatDate(dateString) {
                const date = new Date(dateString);
                return date.toLocaleDateString('mn-MN', {
                    year: 'numeric',
                    month: 'long',
                    day: 'numeric'
                });
            }
            
            static formatCurrency(amount) {
                return new Intl.NumberFormat('mn-MN', {
                    style: 'currency',
                    currency: 'MNT',
                    minimumFractionDigits: 0
                }).format(amount);
            }
            
            static setLoading(element, isLoading) {
                if (!element) return;
                
                if (isLoading) {
                    element.disabled = true;
                    const spinner = element.querySelector('.spinner');
                    if (spinner) spinner.style.display = 'inline-block';
                    if (element.querySelector('span')) {
                        const originalText = element.querySelector('span').textContent;
                        element.setAttribute('data-original-text', originalText);
                        element.querySelector('span').textContent = 'Түр хүлээнэ үү...';
                    }
                } else {
                    element.disabled = false;
                    const spinner = element.querySelector('.spinner');
                    if (spinner) spinner.style.display = 'none';
                    if (element.querySelector('span') && element.getAttribute('data-original-text')) {
                        element.querySelector('span').textContent = element.getAttribute('data-original-text');
                    }
                }
            }
            
            static validateNumber(value, min = 0, max = 100) {
                const num = parseInt(value);
                return !isNaN(num) && num >= min && num <= max;
            }
            
            static validateEmail(email) {
                const re = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                return re.test(email);
            }
            
            static validatePhone(phone) {
                const re = /^[0-9]{8}$/;
                return re.test(phone);
            }
            
            static scrollToElement(elementId) {
                const element = document.getElementById(elementId);
                if (element) {
                    window.scrollTo({
                        top: element.offsetTop - 80,
                        behavior: 'smooth'
                    });
                }
            }
            
            static updateCopyrightYear() {
                if (DOM.currentYear) {
                    DOM.currentYear.textContent = new Date().getFullYear();
                }
            }
            
            static generateId(prefix = '') {
                return `${prefix}${Date.now()}-${Math.floor(Math.random() * 10000)}`;
            }
            
            static calculateAge(birthDate) {
                const birth = new Date(birthDate);
                const today = new Date();
                let age = today.getFullYear() - birth.getFullYear();
                const monthDiff = today.getMonth() - birth.getMonth();
                
                if (monthDiff < 0 || (monthDiff === 0 && today.getDate() < birth.getDate())) {
                    age--;
                }
                
                return age;
            }
            
            static generatePassword(length = 8) {
                // Зөвхөн тоон password үүсгэх
                const chars = '0123456789';
                let password = '';
                for (let i = 0; i < length; i++) {
                    password += chars.charAt(Math.floor(Math.random() * chars.length));
                }
                return password;
            }
            
            static trackGAEvent(category, action, label, value) {
                if (typeof gtag !== 'undefined') {
                    gtag('event', action, {
                        'event_category': category,
                        'event_label': label,
                        'value': value,
                        'send_to': CONFIG.GA_TRACKING_ID
                    });
                }
            }
        }
        
        // ============================================================================
        // TOAST NOTIFICATION SYSTEM
        // ============================================================================
        
        class Toast {
            static show(message, type = 'info', duration = 3000) {
                const toast = document.createElement('div');
                toast.className = `toast toast-${type}`;
                
                let icon = 'info-circle';
                switch (type) {
                    case 'success': icon = 'check-circle'; break;
                    case 'error': icon = 'exclamation-circle'; break;
                    case 'warning': icon = 'exclamation-triangle'; break;
                    case 'info': icon = 'info-circle'; break;
                }
                
                toast.innerHTML = `
                    <i class="fas fa-${icon}"></i>
                    <span>${message}</span>
                `;
                
                DOM.toastContainer.appendChild(toast);
                
                setTimeout(() => toast.classList.add('show'), 10);
                
                setTimeout(() => {
                    toast.classList.remove('show');
                    setTimeout(() => {
                        if (toast.parentNode) {
                            toast.parentNode.removeChild(toast);
                        }
                    }, 300);
                }, duration);
                
                toast.addEventListener('click', () => {
                    toast.classList.remove('show');
                    setTimeout(() => {
                        if (toast.parentNode) {
                            toast.parentNode.removeChild(toast);
                        }
                    }, 300);
                });
                
                return toast;
            }
            
            static success(message, duration = 3000) {
                return this.show(message, 'success', duration);
            }
            
            static error(message, duration = 4000) {
                return this.show(message, 'error', duration);
            }
            
            static warning(message, duration = 3000) {
                return this.show(message, 'warning', duration);
            }
            
            static info(message, duration = 3000) {
                return this.show(message, 'info', duration);
            }
        }
        
        // ============================================================================
        // EMAIL SERVICE
        // ============================================================================
        
        class EmailService {
            static async sendRegistrationEmail(userData) {
                try {
                    const templateParams = {
                        to_email: userData.email,
                        to_name: userData.parentName,
                        child_name: userData.childName,
                        registration_id: userData.registrationId,
                        password: userData.password,
                        program: userData.program,
                        registration_date: Utils.formatDate(userData.registrationDate),
                        from_name: 'Neurosun Academy',
                        reply_to: 'info@neurosunacademy.com'
                    };
                    
                    const response = await emailjs.send(
                        CONFIG.EMAILJS.SERVICE_ID,
                        CONFIG.EMAILJS.TEMPLATE_ID,
                        templateParams,
                        CONFIG.EMAILJS.PUBLIC_KEY
                    );
                    
                    Utils.trackGAEvent('Email', 'Registration_Sent', userData.email);
                    return { success: true, response };
                    
                } catch (error) {
                    console.error('Email sending failed:', error);
                    return { success: false, error };
                }
            }
            
            static async sendApprovalEmail(userData) {
                try {
                    const templateParams = {
                        to_email: userData.email,
                        to_name: userData.parentName,
                        child_name: userData.childName,
                        registration_id: userData.registrationId,
                        program: userData.program,
                        start_date: Utils.formatDate(userData.startDate),
                        training_type: userData.trainingType,
                        login_email: userData.email,
                        login_password: userData.password,
                        from_name: 'Neurosun Academy',
                        reply_to: 'info@neurosunacademy.com'
                    };
                    
                    const response = await emailjs.send(
                        CONFIG.EMAILJS.SERVICE_ID,
                        'template_approval', // Create this template in EmailJS
                        templateParams,
                        CONFIG.EMAILJS.PUBLIC_KEY
                    );
                    
                    Utils.trackGAEvent('Email', 'Approval_Sent', userData.email);
                    return { success: true, response };
                    
                } catch (error) {
                    console.error('Approval email sending failed:', error);
                    return { success: false, error };
                }
            }
            
            static async sendPaymentEmail(userData, paymentDetails) {
                try {
                    const templateParams = {
                        to_email: userData.email,
                        to_name: userData.parentName,
                        child_name: userData.childName,
                        registration_id: userData.registrationId,
                        program: userData.program,
                        amount: paymentDetails.amount,
                        bank_name: CONFIG.BANK_INFO.name,
                        account_number: CONFIG.BANK_INFO.accountNumber,
                        account_name: CONFIG.BANK_INFO.accountName,
                        payment_method: paymentDetails.method,
                        payment_date: Utils.formatDate(new Date()),
                        from_name: 'Neurosun Academy',
                        reply_to: 'info@neurosunacademy.com'
                    };
                    
                    const response = await emailjs.send(
                        CONFIG.EMAILJS.SERVICE_ID,
                        'template_payment', // Create this template in EmailJS
                        templateParams,
                        CONFIG.EMAILJS.PUBLIC_KEY
                    );
                    
                    Utils.trackGAEvent('Email', 'Payment_Sent', userData.email);
                    return { success: true, response };
                    
                } catch (error) {
                    console.error('Payment email sending failed:', error);
                    return { success: false, error };
                }
            }
        }
        
        // ============================================================================
        // FORM VALIDATION SYSTEM
        // ============================================================================
        
        class FormValidator {
            static init(formElement) {
                if (!formElement) return;
                
                const inputs = formElement.querySelectorAll('input, select, textarea');
                
                inputs.forEach(input => {
                    input.addEventListener('blur', () => this.validateField(input));
                    input.addEventListener('input', () => this.clearError(input));
                    
                    if (input.type === 'email' || input.type === 'tel') {
                        input.addEventListener('input', this.debounce(() => this.validateField(input), 500));
                    }
                });
                
                formElement.addEventListener('submit', (e) => {
                    if (!this.validateForm(formElement)) {
                        e.preventDefault();
                        Toast.error('Маягтыг зөв бөглөнө үү');
                    }
                });
            }
            
            static validateField(field) {
                const formGroup = field.closest('.form-group');
                if (!formGroup) return true;
                
                let isValid = true;
                let message = '';
                
                if (field.hasAttribute('required') && !field.value.trim()) {
                    isValid = false;
                    message = 'Энэ талбарыг бөглөнө үү';
                }
                
                if (field.type === 'email' && field.value) {
                    if (!Utils.validateEmail(field.value)) {
                        isValid = false;
                        message = 'Зөв имэйл хаяг оруулна уу';
                    }
                }
                
                if (field.type === 'tel' && field.value && field.hasAttribute('pattern')) {
                    if (!Utils.validatePhone(field.value)) {
                        isValid = false;
                        message = '8 оронтой утасны дугаар оруулна уу';
                    }
                }
                
                if (field.type === 'date' && field.value) {
                    const date = new Date(field.value);
                    const today = new Date();
                    if (date > today) {
                        isValid = false;
                        message = 'Ирээдүйн огноо оруулах боломжгүй';
                    }
                }
                
                if (!isValid) {
                    formGroup.classList.add('has-error');
                    const errorElement = formGroup.querySelector('.error-message');
                    if (errorElement) errorElement.textContent = message;
                    field.setAttribute('aria-invalid', 'true');
                } else {
                    field.setAttribute('aria-invalid', 'false');
                }
                
                return isValid;
            }
            
            static clearError(field) {
                const formGroup = field.closest('.form-group');
                if (formGroup) {
                    formGroup.classList.remove('has-error');
                }
                field.removeAttribute('aria-invalid');
            }
            
            static validateForm(form) {
                let isValid = true;
                const inputs = form.querySelectorAll('input, select, textarea');
                
                inputs.forEach(input => {
                    if (!this.validateField(input)) {
                        isValid = false;
                        
                        if (isValid === false) {
                            input.focus();
                            isValid = null;
                        }
                    }
                });
                
                return isValid;
            }
            
            static debounce(func, wait) {
                let timeout;
                return function executedFunction(...args) {
                    const later = () => {
                        clearTimeout(timeout);
                        func(...args);
                    };
                    clearTimeout(timeout);
                    timeout = setTimeout(later, wait);
                };
            }
            
            static getFormData(form) {
                const formData = new FormData(form);
                const data = {};
                
                formData.forEach((value, key) => {
                    if (data[key]) {
                        if (Array.isArray(data[key])) {
                            data[key].push(value);
                        } else {
                            data[key] = [data[key], value];
                        }
                    } else {
                        data[key] = value;
                    }
                });
                
                return data;
            }
        }
        
        // ============================================================================
        // USER SERVICE - Бүртгэгдсэн хэрэглэгчид
        // ============================================================================
        
        class UserService {
            static getAllUsers() {
                try {
                    const users = localStorage.getItem(CONFIG.USER_STORAGE_KEY);
                    return users ? JSON.parse(users) : [];
                } catch (error) {
                    console.error('Хэрэглэгчийн мэдээлэл уншихад алдаа:', error);
                    return [];
                }
            }
            
            static getRegisteredUsers() {
                const users = this.getAllUsers();
                return users.filter(user => user.registrationDate);
            }
            
            static getPendingRegistrations() {
                const users = this.getAllUsers();
                return users.filter(user => 
                    user.registrationDate && 
                    user.status === CONFIG.REGISTRATION_STATUS.PENDING
                );
            }
            
            static getApprovedUsers() {
                const users = this.getAllUsers();
                return users.filter(user => 
                    user.registrationDate && 
                    user.status === CONFIG.REGISTRATION_STATUS.APPROVED
                );
            }
            
            static getUserById(userId) {
                const users = this.getAllUsers();
                return users.find(user => user.id === userId) || null;
            }
            
            static getUserByEmail(email) {
                const users = this.getAllUsers();
                return users.find(user => user.email === email) || null;
            }
            
            static saveUser(userData) {
                try {
                    const users = this.getAllUsers();
                    
                    // Шинэ ID үүсгэх
                    const userId = Utils.generateId('USR-');
                    const registrationId = Utils.generateId('REG-');
                    const password = Utils.generatePassword(8);
                    
                    const newUser = {
                        id: userId,
                        registrationId: registrationId,
                        registrationDate: new Date().toISOString(),
                        status: CONFIG.REGISTRATION_STATUS.PENDING,
                        password: password,
                        lastLogin: null,
                        approvedBy: null,
                        approvalDate: null,
                        trainingDays: 0,
                        ...userData,
                        // Анхны ахиц дэвшил
                        initialAssessment: {
                            date: new Date().toISOString(),
                            attention: Math.floor(Math.random() * 30) + 10,
                            memory: Math.floor(Math.random() * 30) + 10,
                            speed: Math.floor(Math.random() * 30) + 10,
                            social: Math.floor(Math.random() * 30) + 10
                        },
                        // Эхний өгөгдөл
                        brainwave: {
                            alpha: Math.floor(Math.random() * 30) + 30,
                            beta: Math.floor(Math.random() * 30) + 30,
                            gamma: Math.floor(Math.random() * 20) + 20,
                            theta: Math.floor(Math.random() * 30) + 30
                        },
                        cognitive: {
                            physical: Math.floor(Math.random() * 30) + 40,
                            attention: Math.floor(Math.random() * 30) + 40,
                            comprehension: Math.floor(Math.random() * 30) + 40,
                            sensory: Math.floor(Math.random() * 30) + 40,
                            memory: Math.floor(Math.random() * 30) + 40
                        },
                        learningSpeed: {
                            focusSpeed: Math.floor(Math.random() * 30) + 40,
                            relaxSpeed: Math.floor(Math.random() * 30) + 40,
                            sustainedAttention: Math.floor(Math.random() * 30) + 40,
                            focusIntensity: Math.floor(Math.random() * 30) + 40,
                            calmnessDepth: Math.floor(Math.random() * 30) + 40,
                            sustainedCalmness: Math.floor(Math.random() * 30) + 40
                        }
                    };
                    
                    users.push(newUser);
                    localStorage.setItem(CONFIG.USER_STORAGE_KEY, JSON.stringify(users));
                    
                    // Google Analytics event
                    Utils.trackGAEvent('Registration', 'New_Registration', registrationId);
                    
                    // Send registration email
                    EmailService.sendRegistrationEmail(newUser).then(result => {
                        if (result.success) {
                            console.log('Registration email sent successfully');
                        }
                    });
                    
                    return newUser;
                } catch (error) {
                    console.error('Хэрэглэгч хадгалахад алдаа:', error);
                    return null;
                }
            }
            
            static approveRegistration(userId, trainingConfig) {
                try {
                    const users = this.getAllUsers();
                    const index = users.findIndex(user => user.id === userId);
                    
                    if (index === -1) return null;
                    
                    // Сургалтын огноо тооцоолох
                    const startDate = new Date();
                    const endDate = new Date();
                    const trainingDays = trainingConfig.trainingDays || CONFIG.DEFAULT_TRAINING_DAYS;
                    endDate.setDate(startDate.getDate() + trainingDays);
                    
                    users[index] = {
                        ...users[index],
                        status: CONFIG.REGISTRATION_STATUS.APPROVED,
                        approvalDate: new Date().toISOString(),
                        approvedBy: AppState.currentUser?.name || 'Админ',
                        startDate: startDate.toISOString().split('T')[0],
                        endDate: endDate.toISOString().split('T')[0],
                        trainingType: trainingConfig.trainingType || CONFIG.TRAINING_TYPES.OFFLINE,
                        trainingDays: trainingDays,
                        remainingDays: trainingDays
                    };
                    
                    localStorage.setItem(CONFIG.USER_STORAGE_KEY, JSON.stringify(users));
                    
                    // Google Analytics event
                    Utils.trackGAEvent('Admin', 'Registration_Approved', userId);
                    
                    // Send approval email
                    EmailService.sendApprovalEmail(users[index]).then(result => {
                        if (result.success) {
                            console.log('Approval email sent successfully');
                        }
                    });
                    
                    return users[index];
                } catch (error) {
                    console.error('Бүртгэл баталгаажуулах алдаа:', error);
                    return null;
                }
            }
            
            static rejectRegistration(userId, reason = '') {
                try {
                    const users = this.getAllUsers();
                    const index = users.findIndex(user => user.id === userId);
                    
                    if (index === -1) return null;
                    
                    users[index] = {
                        ...users[index],
                        status: CONFIG.REGISTRATION_STATUS.REJECTED,
                        rejectionDate: new Date().toISOString(),
                        rejectedBy: AppState.currentUser?.name || 'Админ',
                        rejectionReason: reason
                    };
                    
                    localStorage.setItem(CONFIG.USER_STORAGE_KEY, JSON.stringify(users));
                    
                    // Google Analytics event
                    Utils.trackGAEvent('Admin', 'Registration_Rejected', userId);
                    
                    return users[index];
                } catch (error) {
                    console.error('Бүртгэл татгалзах алдаа:', error);
                    return null;
                }
            }
            
            static updateUser(userId, updates) {
                try {
                    const users = this.getAllUsers();
                    const index = users.findIndex(user => user.id === userId);
                    
                    if (index !== -1) {
                        users[index] = { ...users[index], ...updates };
                        localStorage.setItem(CONFIG.USER_STORAGE_KEY, JSON.stringify(users));
                        return users[index];
                    }
                    
                    return null;
                } catch (error) {
                    console.error('Хэрэглэгч шинэчлэхэд алдаа:', error);
                    return null;
                }
            }
            
            static exportUsers() {
                const users = this.getApprovedUsers();
                const csvContent = this.convertToCSV(users);
                this.downloadCSV(csvContent, 'neurosun_users.csv');
                
                // Google Analytics event
                Utils.trackGAEvent('Admin', 'Users_Exported', 'CSV');
            }
            
            static convertToCSV(users) {
                const headers = ['ID', 'Хүүхдийн нэр', 'Эцэг/эхийн нэр', 'Утас', 'Имэйл', 'Хөтөлбөр', 'Сургалтын төрөл', 'Эхлэх огноо', 'Дуусах огноо', 'Үлдэгдэл хоног'];
                const rows = users.map(user => [
                    user.registrationId,
                    user.childName,
                    user.parentName,
                    user.phone,
                    user.email,
                    user.program,
                    user.trainingType || 'Тодорхойгүй',
                    user.startDate || 'Тодорхойгүй',
                    user.endDate || 'Тодорхойгүй',
                    user.remainingDays || 0
                ]);
                
                return [headers, ...rows].map(row => row.join(',')).join('\n');
            }
            
            static downloadCSV(content, filename) {
                const blob = new Blob(['\uFEFF' + content], { type: 'text/csv;charset=utf-8;' });
                const link = document.createElement('a');
                const url = URL.createObjectURL(blob);
                
                link.setAttribute('href', url);
                link.setAttribute('download', filename);
                link.style.visibility = 'hidden';
                
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
            }
        }
        
        // ============================================================================
        // PROGRESS SERVICE - Сурагчийн ахиц дэвшил
        // ============================================================================
        
        class ProgressService {
            static getStudentProgress(studentId) {
                try {
                    const progressData = localStorage.getItem(CONFIG.PROGRESS_STORAGE_KEY);
                    const allProgress = progressData ? JSON.parse(progressData) : {};
                    return allProgress[studentId] || this.createInitialProgress(studentId);
                } catch (error) {
                    console.error('Ахиц дэвшлийн мэдээлэл уншихад алдаа:', error);
                    return this.createInitialProgress(studentId);
                }
            }
            
            static createInitialProgress(studentId) {
                return {
                    studentId: studentId,
                    assessments: [],
                    currentProgress: {
                        attention: { current: 30, target: 90, history: [30] },
                        memory: { current: 25, target: 85, history: [25] },
                        speed: { current: 35, target: 95, history: [35] },
                        social: { current: 28, target: 90, history: [28] }
                    },
                    lastUpdated: new Date().toISOString()
                };
            }
        }
        class ProgressManagement {
    static showProgressEditor(user) {
        if (!user) return;
        
        const progress = ProgressService.getStudentProgress(user.id);
        
        const editorHtml = `
            <div style="margin-bottom: 1rem;">
                <h4 style="color: var(--primary); margin-bottom: 0.5rem;">${user.childName}-ийн ахиц дэвшлийг удирдах</h4>
                
                <div class="progress-sliders" style="margin-top: 1rem;">
                    <div class="form-group">
                        <label for="progressAttention">Анхаарал төвлөрөх чадвар</label>
                        <div style="display: flex; align-items: center; gap: 1rem;">
                            <input type="range" id="progressAttention" class="update-input" 
                                   min="0" max="100" value="${progress.currentProgress.attention.current}" 
                                   style="flex: 1;">
                            <span id="attentionValue" style="min-width: 40px; font-weight: bold;">
                                ${progress.currentProgress.attention.current}%
                            </span>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="progressMemory">Ой тогтоолтын чадвар</label>
                        <div style="display: flex; align-items: center; gap: 1rem;">
                            <input type="range" id="progressMemory" class="update-input" 
                                   min="0" max="100" value="${progress.currentProgress.memory.current}" 
                                   style="flex: 1;">
                            <span id="memoryValue" style="min-width: 40px; font-weight: bold;">
                                ${progress.currentProgress.memory.current}%
                            </span>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="progressSpeed">Бодол санааны хурд</label>
                        <div style="display: flex; align-items: center; gap: 1rem;">
                            <input type="range" id="progressSpeed" class="update-input" 
                                   min="0" max="100" value="${progress.currentProgress.speed.current}" 
                                   style="flex: 1;">
                            <span id="speedValue" style="min-width: 40px; font-weight: bold;">
                                ${progress.currentProgress.speed.current}%
                            </span>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="progressSocial">Нийгмийн харилцаа</label>
                        <div style="display: flex; align-items: center; gap: 1rem;">
                            <input type="range" id="progressSocial" class="update-input" 
                                   min="0" max="100" value="${progress.currentProgress.social.current}" 
                                   style="flex: 1;">
                            <span id="socialValue" style="min-width: 40px; font-weight: bold;">
                                ${progress.currentProgress.social.current}%
                            </span>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="updateNotes">Шинэчлэлтийн тэмдэглэл</label>
                        <textarea id="updateNotes" class="update-input" rows="2" 
                                  placeholder="Шинэчлэлтийн шалтгаан..."></textarea>
                    </div>
                </div>
                
                <div style="display: flex; gap: 0.5rem; margin-top: 1rem;">
                    <button id="saveProgressBtn" class="btn btn-success">
                        <i class="fas fa-save"></i> Ахиц дэвшлийг шинэчлэх
                    </button>
                    <button id="resetProgressBtn" class="btn btn-warning">
                        <i class="fas fa-undo"></i> Анхны байдалд оруулах
                    </button>
                </div>
            </div>
            
            <div style="margin-top: 1.5rem; padding-top: 1rem; border-top: 1px solid var(--gray-light);">
                <h4 style="color: var(--danger); margin-bottom: 0.5rem;">Хүүхдийг устгах</h4>
                <p style="font-size: 0.9rem; color: var(--gray); margin-bottom: 1rem;">
                    Анхаар: Энэ үйлдлийг буцаах боломжгүй. Хүүхдийн бүх өгөгдөл устгагдана.
                </p>
                <div style="display: flex; gap: 0.5rem;">
                    <button id="deleteUserBtn" class="btn btn-danger">
                        <i class="fas fa-trash"></i> Хэрэглэгчийг устгах
                    </button>
                </div>
            </div>
        `;
        
        const progressManagementDiv = document.getElementById('progressManagement');
        if (progressManagementDiv) {
            progressManagementDiv.innerHTML = editorHtml;
            
            // Event listeners нэмэх
            this.addProgressEditorListeners(user.id);
        }
    }
    
    static addProgressEditorListeners(userId) {
        // Slider value display
        const attentionSlider = document.getElementById('progressAttention');
        const memorySlider = document.getElementById('progressMemory');
        const speedSlider = document.getElementById('progressSpeed');
        const socialSlider = document.getElementById('progressSocial');
        
        const updateSliderDisplay = (sliderId, valueId) => {
            const slider = document.getElementById(sliderId);
            const valueSpan = document.getElementById(valueId);
            if (slider && valueSpan) {
                slider.addEventListener('input', () => {
                    valueSpan.textContent = `${slider.value}%`;
                });
            }
        };
        
        updateSliderDisplay('progressAttention', 'attentionValue');
        updateSliderDisplay('progressMemory', 'memoryValue');
        updateSliderDisplay('progressSpeed', 'speedValue');
        updateSliderDisplay('progressSocial', 'socialValue');
        
        // Save progress button
        const saveBtn = document.getElementById('saveProgressBtn');
        if (saveBtn) {
            saveBtn.addEventListener('click', () => {
                this.saveProgressChanges(userId);
            });
        }
        
        // Reset progress button
        const resetBtn = document.getElementById('resetProgressBtn');
        if (resetBtn) {
            resetBtn.addEventListener('click', () => {
                this.resetProgress(userId);
            });
        }
        
        // Delete user button
        const deleteBtn = document.getElementById('deleteUserBtn');
        if (deleteBtn) {
            deleteBtn.addEventListener('click', () => {
                this.confirmDeleteUser(userId);
            });
        }
    }
    
    static saveProgressChanges(userId) {
        const user = UserService.getUserById(userId);
        if (!user) {
            Toast.error('Хэрэглэгч олдсонгүй');
            return;
        }
        
        const attention = parseInt(document.getElementById('progressAttention')?.value) || 0;
        const memory = parseInt(document.getElementById('progressMemory')?.value) || 0;
        const speed = parseInt(document.getElementById('progressSpeed')?.value) || 0;
        const social = parseInt(document.getElementById('progressSocial')?.value) || 0;
        const notes = document.getElementById('updateNotes')?.value || '';
        
        if (!this.validateProgressValues(attention, memory, speed, social)) {
            Toast.error('0-100 хооронд утга оруулна уу');
            return;
        }
        
        // Хуучин прогрессийг хадгалах
        const oldProgress = ProgressService.getStudentProgress(userId);
        
        // Шинэчлэлт хийх
        const updatedProgress = {
            studentId: userId,
            assessments: [...oldProgress.assessments],
            currentProgress: {
                attention: { 
                    current: attention, 
                    target: 90, 
                    history: [...oldProgress.currentProgress.attention.history, attention] 
                },
                memory: { 
                    current: memory, 
                    target: 85, 
                    history: [...oldProgress.currentProgress.memory.history, memory] 
                },
                speed: { 
                    current: speed, 
                    target: 95, 
                    history: [...oldProgress.currentProgress.speed.history, speed] 
                },
                social: { 
                    current: social, 
                    target: 90, 
                    history: [...oldProgress.currentProgress.social.history, social] 
                }
            },
            lastUpdated: new Date().toISOString(),
            updateNotes: notes,
            updatedBy: AppState.currentUser?.name || 'Админ',
            updateDate: new Date().toISOString()
        };
        
        // Progress хадгалах
        this.saveProgressData(userId, updatedProgress);
        
        // Хэрэглэгчийн өгөгдлийг шинэчлэх
        const updatedUser = {
            ...user,
            brainwave: this.calculateBrainwaveFromProgress(attention, memory, speed, social),
            cognitive: this.calculateCognitiveFromProgress(attention, memory, speed, social),
            learningSpeed: this.calculateLearningSpeedFromProgress(attention, memory, speed, social)
        };
        
        UserService.updateUser(userId, updatedUser);
        
        // Google Analytics event
        Utils.trackGAEvent('Admin', 'Progress_Updated', userId, 
            Math.round((attention + memory + speed + social) / 4));
        
        Toast.success('Ахиц дэвшил амжилттай шинэчлэгдлээ');
        
        // Панелыг шинэчлэх
        AdminPanelService.selectUser(userId);
    }
    
    static resetProgress(userId) {
        if (!confirm('Та хүүхдийн ахиц дэвшлийг анхны байдалд оруулахдаа итгэлтэй байна уу?')) {
            return;
        }
        
        const defaultProgress = ProgressService.createInitialProgress(userId);
        this.saveProgressData(userId, defaultProgress);
        
        const user = UserService.getUserById(userId);
        if (user) {
            const resetUser = {
                ...user,
                brainwave: {
                    alpha: Math.floor(Math.random() * 30) + 30,
                    beta: Math.floor(Math.random() * 30) + 30,
                    gamma: Math.floor(Math.random() * 20) + 20,
                    theta: Math.floor(Math.random() * 30) + 30
                },
                cognitive: {
                    physical: Math.floor(Math.random() * 30) + 40,
                    attention: Math.floor(Math.random() * 30) + 40,
                    comprehension: Math.floor(Math.random() * 30) + 40,
                    sensory: Math.floor(Math.random() * 30) + 40,
                    memory: Math.floor(Math.random() * 30) + 40
                },
                learningSpeed: {
                    focusSpeed: Math.floor(Math.random() * 30) + 40,
                    relaxSpeed: Math.floor(Math.random() * 30) + 40,
                    sustainedAttention: Math.floor(Math.random() * 30) + 40,
                    focusIntensity: Math.floor(Math.random() * 30) + 40,
                    calmnessDepth: Math.floor(Math.random() * 30) + 40,
                    sustainedCalmness: Math.floor(Math.random() * 30) + 40
                }
            };
            
            UserService.updateUser(userId, resetUser);
        }
        
        Utils.trackGAEvent('Admin', 'Progress_Reset', userId);
        Toast.success('Ахиц дэвшил анхны байдалд оруулагдлаа');
        AdminPanelService.selectUser(userId);
    }
    
    static confirmDeleteUser(userId) {
        const user = UserService.getUserById(userId);
        if (!user) return;
        
        const confirmationText = `"${user.childName}" гэх хүүхдийг устгахдаа итгэлтэй байна уу?`;
        
        if (confirm(confirmationText)) {
            const finalConfirmation = prompt('Устгах бол "УСТГАХ" гэж бичнэ үү');
            
            if (finalConfirmation === 'УСТГАХ') {
                this.deleteUser(userId);
            } else {
                Toast.info('Устгах цуцлагдлаа');
            }
        }
    }
    
    static deleteUser(userId) {
        try {
            // Хэрэглэгчийн жагсаалтаас устгах
            const users = UserService.getAllUsers();
            const updatedUsers = users.filter(user => user.id !== userId);
            
            localStorage.setItem(CONFIG.USER_STORAGE_KEY, JSON.stringify(updatedUsers));
            
            // Прогрессийн өгөгдлөөс устгах
            const progressData = localStorage.getItem(CONFIG.PROGRESS_STORAGE_KEY);
            if (progressData) {
                const allProgress = JSON.parse(progressData);
                delete allProgress[userId];
                localStorage.setItem(CONFIG.PROGRESS_STORAGE_KEY, JSON.stringify(allProgress));
            }
            
            // Админ панелыг шинэчлэх
            AdminPanelService.loadAdminPanel();
            
            // Google Analytics event
            Utils.trackGAEvent('Admin', 'User_Deleted', userId);
            
            Toast.success('Хэрэглэгч амжилттай устгагдлаа');
            
        } catch (error) {
            console.error('Хэрэглэгч устгахад алдаа:', error);
            Toast.error('Хэрэглэгч устгахад алдаа гарлаа');
        }
    }
    
    static saveProgressData(userId, progressData) {
        try {
            const allProgress = localStorage.getItem(CONFIG.PROGRESS_STORAGE_KEY);
            const progressObj = allProgress ? JSON.parse(allProgress) : {};
            
            progressObj[userId] = progressData;
            localStorage.setItem(CONFIG.PROGRESS_STORAGE_KEY, JSON.stringify(progressObj));
            
            return true;
        } catch (error) {
            console.error('Progress хадгалахад алдаа:', error);
            return false;
        }
    }
    
    static validateProgressValues(attention, memory, speed, social) {
        return [attention, memory, speed, social].every(value => 
            !isNaN(value) && value >= 0 && value <= 100
        );
    }
    
    static calculateBrainwaveFromProgress(attention, memory, speed, social) {
        const avg = (attention + memory + speed + social) / 4;
        
        return {
            alpha: Math.min(100, Math.max(20, Math.round(avg * 0.8))),
            beta: Math.min(100, Math.max(15, Math.round(attention * 0.9))),
            gamma: Math.min(100, Math.max(10, Math.round(speed * 0.7))),
            theta: Math.min(100, Math.max(25, Math.round(memory * 0.75)))
        };
    }
    
    static calculateCognitiveFromProgress(attention, memory, speed, social) {
        return {
            physical: Math.min(100, Math.round((social + speed) / 2)),
            attention: Math.min(100, attention),
            comprehension: Math.min(100, Math.round((memory + attention) / 1.5)),
            sensory: Math.min(100, Math.round(speed * 0.8)),
            memory: Math.min(100, memory)
        };
    }
    
    static calculateLearningSpeedFromProgress(attention, memory, speed, social) {
        return {
            focusSpeed: Math.min(100, Math.round(attention * 0.9)),
            relaxSpeed: Math.min(100, Math.round(social * 0.85)),
            sustainedAttention: Math.min(100, Math.round(attention * 0.95)),
            focusIntensity: Math.min(100, Math.round(speed * 0.8)),
            calmnessDepth: Math.min(100, Math.round(memory * 0.75)),
            sustainedCalmness: Math.min(100, Math.round((social + memory) / 2))
        };
    }
}

        
        // ============================================================================
        // PAYMENT SYSTEM
        // ============================================================================
        
        class PaymentSystem {
            static init() {
                if (!DOM.paymentMethods) return;
                
                DOM.paymentMethods.forEach(method => {
                    method.addEventListener('click', () => {
                        this.selectPaymentMethod(method.dataset.method);
                    });
                });
                
                // Default to bank transfer
                this.selectPaymentMethod('bank');
            }
            
            static selectPaymentMethod(method) {
                // Remove active class from all methods
                DOM.paymentMethods.forEach(m => {
                    m.classList.remove('active');
                });
                
                // Add active class to selected method
                const selectedMethod = document.querySelector(`[data-method="${method}"]`);
                if (selectedMethod) {
                    selectedMethod.classList.add('active');
                }
                
                // Show corresponding payment details
                if (DOM.bankDetails) DOM.bankDetails.style.display = 'block';
                if (DOM.qrCode) DOM.qrCode.style.display = 'none';
                if (DOM.mobilePayment) DOM.mobilePayment.style.display = 'none';
                
                switch (method) {
                    case 'bank':
                        // Already shown by default
                        break;
                    case 'qr':
                        if (DOM.bankDetails) DOM.bankDetails.style.display = 'block';
                        if (DOM.qrCode) DOM.qrCode.style.display = 'block';
                        if (DOM.mobilePayment) DOM.mobilePayment.style.display = 'none';
                        break;
                    case 'mobile':
                        if (DOM.bankDetails) DOM.bankDetails.style.display = 'block';
                        if (DOM.qrCode) DOM.qrCode.style.display = 'none';
                        if (DOM.mobilePayment) DOM.mobilePayment.style.display = 'block';
                        break;
                }
                
                Utils.trackGAEvent('Payment', 'Method_Selected', method);
            }
            
            static processPayment(userId, paymentDetails) {
                // Simulate payment processing
                return new Promise((resolve) => {
                    setTimeout(() => {
                        // In real implementation, integrate with payment gateway
                        const paymentId = `PAY-${Date.now()}`;
                        
                        // Update user payment status
                        UserService.updateUser(userId, {
                            paymentStatus: 'paid',
                            paymentMethod: paymentDetails.method,
                            paymentDate: new Date().toISOString(),
                            paymentId: paymentId
                        });
                        
                        // Google Analytics event
                        Utils.trackGAEvent('Payment', 'Completed', paymentId, paymentDetails.amount);
                        
                        resolve({ success: true, paymentId });
                    }, 1500);
                });
            }
        }
        
        // ============================================================================
        // CHART RENDERING SYSTEM
        // ============================================================================
        
        class ChartRenderer {
            static renderBrainwaveChart(data) {
                if (!DOM.brainwaveVisualization || !data) return;
                
                const { alpha = 0, beta = 0, gamma = 0, theta = 0 } = data;
                
                DOM.brainwaveVisualization.innerHTML = '';
                
                const brainwaveData = [
                    { label: 'Alpha', value: alpha, color: 'var(--chart-alpha)' },
                    { label: 'Beta', value: beta, color: 'var(--chart-beta)' },
                    { label: 'Gamma', value: gamma, color: 'var(--chart-gamma)' },
                    { label: 'Theta', value: theta, color: 'var(--chart-theta)' }
                ];
                
                brainwaveData.forEach(item => {
                    const row = document.createElement('div');
                    row.className = 'chart-row';
                    
                    const label = document.createElement('div');
                    label.className = 'chart-label';
                    label.textContent = item.label;
                    
                    const barContainer = document.createElement('div');
                    barContainer.className = 'chart-bar-container';
                    
                    const bar = document.createElement('div');
                    bar.className = 'chart-bar';
                    bar.style.width = '0%';
                    bar.style.backgroundColor = item.color;
                    
                    const value = document.createElement('div');
                    value.className = 'chart-value';
                    value.textContent = `${item.value}%`;
                    
                    barContainer.appendChild(bar);
                    row.appendChild(label);
                    row.appendChild(barContainer);
                    row.appendChild(value);
                    
                    DOM.brainwaveVisualization.appendChild(row);
                    
                    setTimeout(() => {
                        bar.style.width = `${item.value}%`;
                    }, 100);
                });
            }
            
            static renderCognitiveChart(data) {
                if (!DOM.cognitiveChart || !data) return;
                
                const { physical = 0, attention = 0, comprehension = 0, sensory = 0, memory = 0 } = data;
                
                DOM.cognitiveChart.innerHTML = '';
                
                const cognitiveData = [
                    { label: 'Биеийн хөгжил', value: physical, color: 'var(--chart-cognitive-1)' },
                    { label: 'Анхаарал төвлөрөл', value: attention, color: 'var(--chart-cognitive-2)' },
                    { label: 'Ойлгох чадвар', value: comprehension, color: 'var(--chart-cognitive-3)' },
                    { label: 'Мэдрэхүйн хөгжил', value: sensory, color: 'var(--chart-cognitive-4)' },
                    { label: 'Ой тогтоолт', value: memory, color: 'var(--chart-cognitive-5)' }
                ];
                
                cognitiveData.forEach(item => {
                    const row = document.createElement('div');
                    row.className = 'chart-row';
                    
                    const label = document.createElement('div');
                    label.className = 'chart-label';
                    label.textContent = item.label;
                    
                    const barContainer = document.createElement('div');
                    barContainer.className = 'chart-bar-container';
                    
                    const bar = document.createElement('div');
                    bar.className = 'chart-bar';
                    bar.style.width = '0%';
                    bar.style.backgroundColor = item.color;
                    
                    const value = document.createElement('div');
                    value.className = 'chart-value';
                    value.textContent = `${item.value}%`;
                    
                    barContainer.appendChild(bar);
                    row.appendChild(label);
                    row.appendChild(barContainer);
                    row.appendChild(value);
                    
                    DOM.cognitiveChart.appendChild(row);
                    
                    setTimeout(() => {
                        bar.style.width = `${item.value}%`;
                    }, 100);
                });
            }
            
            static renderLearningSpeedChart(data) {
                if (!DOM.learningSpeedChart || !data) return;
                
                const { 
                    focusSpeed = 0, 
                    relaxSpeed = 0, 
                    sustainedAttention = 0, 
                    focusIntensity = 0, 
                    calmnessDepth = 0, 
                    sustainedCalmness = 0 
                } = data;
                
                DOM.learningSpeedChart.innerHTML = '';
                
                const learningData = [
                    { label: 'Focus Speed', value: focusSpeed, color: 'var(--chart-learning-1)' },
                    { label: 'Relax Speed', value: relaxSpeed, color: 'var(--chart-learning-2)' },
                    { label: 'Sustained Attention', value: sustainedAttention, color: 'var(--chart-learning-3)' },
                    { label: 'Focus Intensity', value: focusIntensity, color: 'var(--chart-learning-4)' },
                    { label: 'Calmness Depth', value: calmnessDepth, color: 'var(--chart-learning-5)' },
                    { label: 'Sustained Calmness', value: sustainedCalmness, color: 'var(--chart-learning-6)' }
                ];
                
                learningData.forEach(item => {
                    const row = document.createElement('div');
                    row.className = 'chart-row';
                    
                    const label = document.createElement('div');
                    label.className = 'chart-label';
                    label.textContent = item.label;
                    
                    const barContainer = document.createElement('div');
                    barContainer.className = 'chart-bar-container';
                    
                    const bar = document.createElement('div');
                    bar.className = 'chart-bar';
                    bar.style.width = '0%';
                    bar.style.backgroundColor = item.color;
                    
                    const value = document.createElement('div');
                    value.className = 'chart-value';
                    value.textContent = `${item.value}%`;
                    
                    barContainer.appendChild(bar);
                    row.appendChild(label);
                    row.appendChild(barContainer);
                    row.appendChild(value);
                    
                    DOM.learningSpeedChart.appendChild(row);
                    
                    setTimeout(() => {
                        bar.style.width = `${item.value}%`;
                    }, 100);
                });
            }
            
            static renderProgressBars(progress) {
                if (!progress) return;
                
                setTimeout(() => {
                    if (progress.attention && DOM.attentionProgress) {
                        const value = progress.attention.current || 0;
                        DOM.attentionProgress.style.width = `${value}%`;
                        DOM.attentionProgress.setAttribute('aria-valuenow', value);
                        DOM.attentionPercent.textContent = `${value}%`;
                    }
                    
                    if (progress.memory && DOM.memoryProgress) {
                        const value = progress.memory.current || 0;
                        DOM.memoryProgress.style.width = `${value}%`;
                        DOM.memoryProgress.setAttribute('aria-valuenow', value);
                        DOM.memoryPercent.textContent = `${value}%`;
                    }
                    
                    if (progress.speed && DOM.speedProgress) {
                        const value = progress.speed.current || 0;
                        DOM.speedProgress.style.width = `${value}%`;
                        DOM.speedProgress.setAttribute('aria-valuenow', value);
                        DOM.speedPercent.textContent = `${value}%`;
                    }
                    
                    if (progress.social && DOM.socialProgress) {
                        const value = progress.social.current || 0;
                        DOM.socialProgress.style.width = `${value}%`;
                        DOM.socialProgress.setAttribute('aria-valuenow', value);
                        DOM.socialPercent.textContent = `${value}%`;
                    }
                }, 500);
            }
        }
        
        // ============================================================================
        // DASHBOARD SERVICE
        // ============================================================================
        
        class DashboardService {
            static async loadDashboardData(forceRefresh = false) {
                try {
                    if (!AppState.currentUser) {
                        throw new Error('Хэрэглэгч олдсонгүй');
                    }
                    
                    const user = AppState.currentUser;
                    const progress = ProgressService.getStudentProgress(user.id);
                    
                    return {
                        user: user,
                        progress: progress.currentProgress,
                        brainwave: user.brainwave || { alpha: 65, beta: 45, gamma: 35, theta: 55 },
                        cognitive: user.cognitive || { physical: 70, attention: 75, comprehension: 80, sensory: 65, memory: 60 },
                        learningSpeed: user.learningSpeed || { 
                            focusSpeed: 72, 
                            relaxSpeed: 68, 
                            sustainedAttention: 75, 
                            focusIntensity: 70, 
                            calmnessDepth: 65, 
                            sustainedCalmness: 60 
                        },
                        remainingDays: this.calculateRemainingDays(user.endDate)
                    };
                    
                } catch (error) {
                    console.error('Dashboard data loading failed:', error);
                    return this.getMockData();
                }
            }
            
            static calculateRemainingDays(endDate) {
                if (!endDate) return 0;
                
                const end = new Date(endDate);
                const now = new Date();
                const diffTime = end - now;
                const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
                
                return diffDays > 0 ? diffDays : 0;
            }
            
            static getMockData() {
                return {
                    user: AppState.currentUser || CONFIG.TEST_USERS[0],
                    progress: {
                        attention: { current: 75, target: 90, history: [60, 65, 70, 75] },
                        memory: { current: 60, target: 85, history: [45, 50, 55, 60] },
                        speed: { current: 80, target: 95, history: [65, 70, 75, 80] },
                        social: { current: 70, target: 90, history: [50, 55, 60, 70] }
                    },
                    brainwave: { alpha: 65, beta: 45, gamma: 35, theta: 55 },
                    cognitive: { physical: 70, attention: 75, comprehension: 80, sensory: 65, memory: 60 },
                    learningSpeed: { 
                        focusSpeed: 72, 
                        relaxSpeed: 68, 
                        sustainedAttention: 75, 
                        focusIntensity: 70, 
                        calmnessDepth: 65, 
                        sustainedCalmness: 60 
                    },
                    remainingDays: Math.floor(Math.random() * 180) + 1
                };
            }
            
            static updateDashboardUI(data) {
                if (!data) return;
                
                if (data.user) {
                    this.updateUserInfo(data.user);
                }
                
                if (data.progress) {
                    ChartRenderer.renderProgressBars(data.progress);
                }
                
                if (data.remainingDays !== undefined) {
                    DOM.remainingDays.textContent = data.remainingDays;
                }
                
                if (data.brainwave) {
                    ChartRenderer.renderBrainwaveChart(data.brainwave);
                }
                
                if (data.cognitive) {
                    ChartRenderer.renderCognitiveChart(data.cognitive);
                }
                
                if (data.learningSpeed) {
                    ChartRenderer.renderLearningSpeedChart(data.learningSpeed);
                }
                
                this.toggleAdminControls(AppState.isAdmin);
            }
            
            static updateUserInfo(user) {
                if (!DOM.studentDetails || !user) return;
                
                const age = Utils.calculateAge(user.birthDate);
                
                const detailsHtml = `
                    <p><strong>Нэр:</strong> <span>${user.childName || 'Мэдээлэл оруулаагүй'}</span></p>
                    <p><strong>Нас:</strong> <span>${age} настай</span></p>
                    <p><strong>Төрсөн огноо:</strong> <span>${user.birthDate ? Utils.formatDate(user.birthDate) : 'Мэдээлэл оруулаагүй'}</span></p>
                    <p><strong>Эцэг/эхийн нэр:</strong> <span>${user.parentName || 'Мэдээлэл оруулаагүй'}</span></p>
                    <p><strong>Утас:</strong> <span>${user.phone || 'Мэдээлэл оруулаагүй'}</span></p>
                    <p><strong>Имэйл:</strong> <span>${user.email || 'Мэдээлэл оруулаагүй'}</span></p>
                    <p><strong>Хөтөлбөр:</strong> <span>${user.program || 'Мэдээлэл оруулаагүй'}</span></p>
                    <p><strong>Сургалтын төрөл:</strong> <span>${user.trainingType || 'Тодорхойгүй'}</span></p>
                    <p><strong>Эхлэсэн огноо:</strong> <span>${user.startDate ? Utils.formatDate(user.startDate) : 'Мэдээлэл оруулаагүй'}</span></p>
                    <p><strong>Дуусах огноо:</strong> <span>${user.endDate ? Utils.formatDate(user.endDate) : 'Мэдээлэл оруулаагүй'}</span></p>
                    <p><strong>Бүртгэлийн дугаар:</strong> <span>${user.registrationId || 'Мэдээлэл оруулаагүй'}</span></p>
                    <p><strong>Төлбөрийн статус:</strong> <span class="status-badge ${user.paymentStatus === 'paid' ? 'status-approved' : 'status-pending'}">${user.paymentStatus === 'paid' ? 'Төлөгдсөн' : 'Төлөгдөөгүй'}</span></p>
                    <p><strong>Бүртгэлийн статус:</strong> <span class="status-badge ${user.status === 'approved' ? 'status-approved' : user.status === 'rejected' ? 'status-rejected' : 'status-pending'}">${user.status === 'approved' ? 'Баталгаажсан' : user.status === 'rejected' ? 'Татгалзсан' : 'Хүлээгдэж байна'}</span></p>
                    ${user.approvalDate ? `<p><strong>Баталгаажсан огноо:</strong> <span>${Utils.formatDate(user.approvalDate)}</span></p>` : ''}
                    ${user.isAdmin ? `<p><strong>Эрх:</strong> <span class="text-danger"><i class="fas fa-user-shield"></i> Администратор</span></p>` : ''}
                `;
                
                DOM.studentDetails.innerHTML = detailsHtml;
            }
            
            static toggleAdminControls(isAdmin) {
                if (isAdmin) {
                    if (DOM.adminPanelBtn) DOM.adminPanelBtn.style.display = 'flex';
                } else {
                    if (DOM.adminPanelBtn) DOM.adminPanelBtn.style.display = 'none';
                }
            }
            
            static show() {
                const sections = document.querySelectorAll('section:not(#dashboard):not(#adminPanel), footer');
                sections.forEach(el => {
                    el.style.display = 'none';
                });
                
                DOM.dashboard.style.display = 'block';
                DOM.adminPanel.style.display = 'none';
                
                this.loadDashboardData().then(data => {
                    this.updateDashboardUI(data);
                });
            }
            
            static hide() {
                const sections = document.querySelectorAll('section, footer');
                sections.forEach(el => {
                    el.style.display = 'block';
                });
                
                DOM.dashboard.style.display = 'none';
                DOM.adminPanel.style.display = 'none';
                
                [DOM.attentionProgress, DOM.memoryProgress, DOM.speedProgress, DOM.socialProgress].forEach(bar => {
                    if (bar) bar.style.width = '0%';
                });
            }
            
            static showAdminPanel() {
                const sections = document.querySelectorAll('section:not(#adminPanel), footer');
                sections.forEach(el => {
                    el.style.display = 'none';
                });
                
                DOM.dashboard.style.display = 'none';
                DOM.adminPanel.style.display = 'block';
                
                AdminPanelService.loadAdminPanel();
            }
            
            static showRegistrationSuccess(user) {
                // Нэвтрэх эрхүүдийг харуулах
                const credentialsHtml = `
                    <h4>Таны нэвтрэх эрхүүд</h4>
                    <div class="credential-item">
                        <div class="credential-label">Имэйл:</div>
                        <div class="credential-value">${user.email}</div>
                    </div>
                    <div class="credential-item">
                        <div class="credential-label">Нууц үг:</div>
                        <div class="credential-value">${user.password}</div>
                    </div>
                    <div class="credential-item">
                        <div class="credential-label">Бүртгэлийн дугаар:</div>
                        <div class="credential-value">${user.registrationId}</div>
                    </div>
                    <p style="margin-top: var(--spacing-md); font-size: var(--font-size-sm); color: var(--warning);">
                        <i class="fas fa-exclamation-triangle"></i> Эдгээр мэдээллийг бичиж авах аль эсвэл screenshot хийн хадгална уу!
                    </p>
                `;
                
                DOM.credentialsDisplay.innerHTML = credentialsHtml;
                
                // Success modal харуулах
                const modal = document.getElementById('registrationSuccessModal');
                modal.classList.add('active');
                modal.setAttribute('aria-hidden', 'false');
                DOM.body.style.overflow = 'hidden';
                AppState.activeModal = 'registrationSuccessModal';
            }
        }
        
        // ============================================================================
        // ADMIN PANEL SERVICE
        // ============================================================================
        
        class AdminPanelService {
    static loadAdminPanel() {
        this.loadPendingRegistrations();
        this.loadApprovedUsers();
        this.clearSelectedUser();
    }
    
    static loadPendingRegistrations() {
        const pendingUsers = UserService.getPendingRegistrations();
        
        let html = '';
        
        if (pendingUsers.length === 0) {
            html = '<p class="text-gray" style="padding: 1rem; text-align: center;">Баталгаажуулах шаардлагатай бүртгэл байхгүй</p>';
        } else {
            pendingUsers.forEach(user => {
                const age = Utils.calculateAge(user.birthDate);
                
                html += `
                    <div class="user-item pending-registration" data-user-id="${user.id}">
                        <div style="display: flex; justify-content: space-between; align-items: flex-start;">
                            <div>
                                <div style="font-weight: 600; margin-bottom: 0.25rem;">
                                    ${user.childName}
                                    <span class="status-badge status-pending">Хүлээгдэж байна</span>
                                </div>
                                <div class="user-info">
                                    <div>Нас: ${age} настай</div>
                                    <div>Эцэг/эх: ${user.parentName}</div>
                                    <div>Хөтөлбөр: ${user.program}</div>
                                    <div>Бүртгүүлсэн: ${Utils.formatDate(user.registrationDate)}</div>
                                </div>
                            </div>
                            <div style="display: flex; gap: 0.5rem; flex-wrap: wrap;">
                                <button class="btn btn-sm btn-success approve-registration-btn" data-user-id="${user.id}">
                                    <i class="fas fa-check"></i> Баталгаажуулах
                                </button>
                                <button class="btn btn-sm btn-danger reject-registration-btn" data-user-id="${user.id}">
                                    <i class="fas fa-times"></i> Татгалзах
                                </button>
                            </div>
                        </div>
                        <div style="margin-top: 0.5rem; padding-top: 0.5rem; border-top: 1px solid var(--gray-light);">
                            <small class="text-gray">Имэйл: ${user.email} | Утас: ${user.phone}</small>
                            ${user.message ? `<div style="margin-top: 0.25rem;"><small><strong>Нэмэлт мэдээлэл:</strong> ${user.message}</small></div>` : ''}
                        </div>
                    </div>
                `;
            });
        }
        
        DOM.pendingRegistrations.innerHTML = html;
        
        // Event listeners нэмэх
        this.addRegistrationEventListeners();
    }
    
    static loadApprovedUsers() {
        const approvedUsers = UserService.getApprovedUsers();
        
        let html = '';
        
        if (approvedUsers.length === 0) {
            html = '<p class="text-gray" style="padding: 1rem; text-align: center;">Баталгаажсан хэрэглэгч олдсонгүй</p>';
        } else {
            approvedUsers.forEach(user => {
                const isActive = AppState.selectedAdminUser?.id === user.id;
                const remainingDays = DashboardService.calculateRemainingDays(user.endDate);
                
                html += `
                    <div class="user-item ${isActive ? 'active' : ''}" data-user-id="${user.id}">
                        <div style="display: flex; justify-content: space-between; align-items: flex-start;">
                            <div>
                                <div style="font-weight: 600; margin-bottom: 0.25rem;">
                                    ${user.childName}
                                    <span class="status-badge status-approved">Идэвхтэй</span>
                                    ${user.paymentStatus === 'paid' ? '<span class="status-badge status-approved">Төлбөр төлсөн</span>' : 
                                      '<span class="status-badge status-pending">Төлбөр хүлээгдэж байна</span>'}
                                </div>
                                <div class="user-info">
                                    <div>Эцэг/эх: ${user.parentName}</div>
                                    <div>Хөтөлбөр: ${user.program}</div>
                                    <div>Үлдэгдэл хоног: ${remainingDays} хоног</div>
                                    <div>Сургалтын төрөл: ${user.trainingType || 'Тодорхойгүй'}</div>
                                </div>
                            </div>
                            <div style="display: flex; gap: 0.25rem;">
                                <button class="btn btn-sm btn-primary manage-user-btn" data-user-id="${user.id}" title="Хэрэглэгчийг удирдах">
                                    <i class="fas fa-cog"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                `;
            });
        }
        
        DOM.adminUsersList.innerHTML = html;
        
        // Event listeners нэмэх
        this.addUserManagementEventListeners();
    }
    
    static addRegistrationEventListeners() {
        document.querySelectorAll('.approve-registration-btn').forEach(btn => {
            btn.addEventListener('click', (e) => {
                e.stopPropagation();
                const userId = btn.getAttribute('data-user-id');
                this.showApprovalForm(userId);
            });
        });
        
        document.querySelectorAll('.reject-registration-btn').forEach(btn => {
            btn.addEventListener('click', (e) => {
                e.stopPropagation();
                const userId = btn.getAttribute('data-user-id');
                this.showRejectionForm(userId);
            });
        });
        
        document.querySelectorAll('.pending-registration').forEach(item => {
            item.addEventListener('click', () => {
                const userId = item.getAttribute('data-user-id');
                this.selectUser(userId);
            });
        });
    }
    
    static addUserManagementEventListeners() {
        document.querySelectorAll('.user-item[data-user-id]').forEach(item => {
            item.addEventListener('click', (e) => {
                if (!e.target.closest('.manage-user-btn') && !e.target.closest('.btn')) {
                    const userId = item.getAttribute('data-user-id');
                    this.selectUser(userId);
                }
            });
        });
        
        document.querySelectorAll('.manage-user-btn').forEach(btn => {
            btn.addEventListener('click', (e) => {
                e.stopPropagation();
                const userId = btn.getAttribute('data-user-id');
                this.selectUser(userId);
                setTimeout(() => {
                    document.getElementById('progressManagement')?.scrollIntoView({ 
                        behavior: 'smooth' 
                    });
                }, 100);
            });
        });
    }
    
    static selectUser(userId) {
        const user = UserService.getUserById(userId);
        if (!user) return;
        
        AppState.selectedAdminUser = user;
        
        // Идэвхтэй класс тохируулах
        document.querySelectorAll('.user-item').forEach(item => {
            item.classList.remove('active');
            if (item.getAttribute('data-user-id') === userId) {
                item.classList.add('active');
            }
        });
        
        this.updateUserDetails(user);
        this.updateProgressInfo(user);
        ProgressManagement.showProgressEditor(user);
    }
    
    static updateUserDetails(user) {
        const age = Utils.calculateAge(user.birthDate);
        const remainingDays = DashboardService.calculateRemainingDays(user.endDate);
        
        const detailsHtml = `
            <div style="margin-bottom: 1rem;">
                <h4 style="color: var(--primary); margin-bottom: 0.5rem;">Үндсэн мэдээлэл</h4>
                <p><strong>Бүртгэлийн дугаар:</strong> ${user.registrationId}</p>
                <p><strong>Хүүхдийн нэр:</strong> ${user.childName}</p>
                <p><strong>Нас:</strong> ${age} настай</p>
                <p><strong>Төрсөн огноо:</strong> ${Utils.formatDate(user.birthDate)}</p>
                <p><strong>Эцэг/эхийн нэр:</strong> ${user.parentName}</p>
                <p><strong>Утас:</strong> ${user.phone}</p>
                <p><strong>Имэйл:</strong> ${user.email}</p>
                <p><strong>Нэвтрэх нууц үг:</strong> ${user.password || 'Тодорхойгүй'}</p>
            </div>
            <div style="margin-bottom: 1rem;">
                <h4 style="color: var(--primary); margin-bottom: 0.5rem;">Сургалтын мэдээлэл</h4>
                <p><strong>Хөтөлбөр:</strong> ${user.program}</p>
                <p><strong>Сургалтын төрөл:</strong> ${user.trainingType || 'Тодорхойгүй'}</p>
                <p><strong>Эхлэсэн огноо:</strong> ${user.startDate ? Utils.formatDate(user.startDate) : 'Тодорхойгүй'}</p>
                <p><strong>Дуусах огноо:</strong> ${user.endDate ? Utils.formatDate(user.endDate) : 'Тодорхойгүй'}</p>
                <p><strong>Үлдэгдэл хоног:</strong> ${remainingDays} хоног</p>
                <p><strong>Нийт сургалтын хоног:</strong> ${user.trainingDays || 0} хоног</p>
                <p><strong>Төлбөрийн статус:</strong> 
                    <span class="status-badge ${user.paymentStatus === 'paid' ? 'status-approved' : 'status-pending'}">
                        ${user.paymentStatus === 'paid' ? 'Төлөгдсөн' : 'Төлөгдөөгүй'}
                    </span>
                </p>
                ${user.paymentDate ? `<p><strong>Төлбөр төлсөн огноо:</strong> ${Utils.formatDate(user.paymentDate)}</p>` : ''}
            </div>
            <div>
                <h4 style="color: var(--primary); margin-bottom: 0.5rem;">Бүртгэлийн мэдээлэл</h4>
                <p><strong>Бүртгүүлсэн огноо:</strong> ${Utils.formatDate(user.registrationDate)}</p>
                <p><strong>Статус:</strong> 
                    <span class="status-badge ${user.status === 'approved' ? 'status-approved' : user.status === 'rejected' ? 'status-rejected' : 'status-pending'}">
                        ${user.status === 'approved' ? 'Баталгаажсан' : user.status === 'rejected' ? 'Татгалзсан' : 'Хүлээгдэж байна'}
                    </span>
                </p>
                ${user.approvalDate ? `<p><strong>Баталгаажсан огноо:</strong> ${Utils.formatDate(user.approvalDate)}</p>` : ''}
                ${user.approvedBy ? `<p><strong>Баталгаажуулсан:</strong> ${user.approvedBy}</p>` : ''}
                ${user.lastLogin ? `<p><strong>Сүүлд нэвтэрсэн:</strong> ${Utils.formatDate(user.lastLogin)}</p>` : ''}
            </div>
        `;
        
        DOM.adminUserDetails.innerHTML = detailsHtml;
    }
    
    static updateProgressInfo(user) {
        const progress = ProgressService.getStudentProgress(user.id);
        
        let progressHtml = '';
        
        if (progress.currentProgress) {
            const { attention, memory, speed, social } = progress.currentProgress;
            
            progressHtml += `
                <div style="margin-bottom: 1rem;">
                    <h4 style="color: var(--primary); margin-bottom: 0.5rem;">Одоогийн дэвшил</h4>
                    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 1rem;">
                        <div style="padding: 1rem; background: var(--light-gray); border-radius: var(--radius-sm);">
                            <div style="font-size: 0.9rem; color: var(--gray); margin-bottom: 0.25rem;">Анхаарал төвлөрөл</div>
                            <div style="font-size: 1.5rem; font-weight: bold; color: var(--primary);">
                                ${attention.current}%
                            </div>
                            <div style="font-size: 0.8rem; color: var(--gray);">
                                Зорилт: ${attention.target}%
                            </div>
                        </div>
                        <div style="padding: 1rem; background: var(--light-gray); border-radius: var(--radius-sm);">
                            <div style="font-size: 0.9rem; color: var(--gray); margin-bottom: 0.25rem;">Ой тогтоолт</div>
                            <div style="font-size: 1.5rem; font-weight: bold; color: var(--primary);">
                                ${memory.current}%
                            </div>
                            <div style="font-size: 0.8rem; color: var(--gray);">
                                Зорилт: ${memory.target}%
                            </div>
                        </div>
                        <div style="padding: 1rem; background: var(--light-gray); border-radius: var(--radius-sm);">
                            <div style="font-size: 0.9rem; color: var(--gray); margin-bottom: 0.25rem;">Бодол санааны хурд</div>
                            <div style="font-size: 1.5rem; font-weight: bold; color: var(--primary);">
                                ${speed.current}%
                            </div>
                            <div style="font-size: 0.8rem; color: var(--gray);">
                                Зорилт: ${speed.target}%
                            </div>
                        </div>
                        <div style="padding: 1rem; background: var(--light-gray); border-radius: var(--radius-sm);">
                            <div style="font-size: 0.9rem; color: var(--gray); margin-bottom: 0.25rem;">Нийгмийн харилцаа</div>
                            <div style="font-size: 1.5rem; font-weight: bold; color: var(--primary);">
                                ${social.current}%
                            </div>
                            <div style="font-size: 0.8rem; color: var(--gray);">
                                Зорилт: ${social.target}%
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }
        
        if (progress.assessments && progress.assessments.length > 0) {
            progressHtml += `
                <div>
                    <h4 style="color: var(--primary); margin-bottom: 0.5rem;">Сүүлийн үнэлгээ</h4>
                    <div class="progress-history">
            `;
            
            progress.assessments.slice(0, 5).forEach(assessment => {
                let bgColor = 'var(--light-gray)';
                let textColor = 'var(--primary)';
                
                if (assessment.score >= 80) {
                    bgColor = 'var(--success-light)';
                    textColor = 'var(--success)';
                } else if (assessment.score >= 60) {
                    bgColor = 'var(--warning-light)';
                    textColor = 'var(--warning)';
                } else {
                    bgColor = 'var(--danger-light)';
                    textColor = 'var(--danger)';
                }
                
                progressHtml += `
                    <div class="progress-entry" style="background-color: ${bgColor};">
                        <div>
                            <strong style="color: ${textColor};">${assessment.type}</strong>
                            <div style="font-size: 0.875rem; color: ${textColor};">${assessment.score}%</div>
                            ${assessment.notes ? `<div style="font-size: 0.75rem; color: var(--gray); margin-top: 0.25rem;">${assessment.notes}</div>` : ''}
                        </div>
                        <div class="progress-date">${Utils.formatDate(assessment.date)}</div>
                    </div>
                `;
            });
            
            progressHtml += `
                    </div>
                </div>
            `;
        } else {
            progressHtml += '<p class="text-gray">Үнэлгээний мэдээлэл байхгүй</p>';
        }
        
        DOM.adminProgressInfo.innerHTML = progressHtml;
    }
    
    static clearSelectedUser() {
        AppState.selectedAdminUser = null;
        DOM.adminUserDetails.innerHTML = '<p class="text-gray">Хэрэглэгч сонгоно уу</p>';
        DOM.adminProgressInfo.innerHTML = '<p class="text-gray">Хэрэглэгч сонгоно уу</p>';
        DOM.registrationApprovalForm.innerHTML = '<p class="text-gray">Баталгаажуулах хэрэглэгч сонгоно уу</p>';
        
        const progressManagementDiv = document.getElementById('progressManagement');
        if (progressManagementDiv) {
            progressManagementDiv.innerHTML = '<p class="text-gray">Хэрэглэгч сонгоно уу</p>';
        }
    }
}
        
        
        // ============================================================================
        // AUTHENTICATION SERVICE
        // ============================================================================
        
        class AuthService {
            static async login(email, password) {
                try {
                    await new Promise(resolve => setTimeout(resolve, 1000));
                    
                    // Google Analytics event
                    Utils.trackGAEvent('Authentication', 'Login_Attempt', email);
                    
                    // Тест хэрэглэгч шалгах
                    const testUser = CONFIG.TEST_USERS.find(u => 
                        u.email === email && u.password === password
                    );
                    
                    if (testUser) {
                        localStorage.setItem(CONFIG.AUTH_TOKEN_KEY, 'mock_jwt_token_' + Date.now());
                        localStorage.setItem(CONFIG.USER_DATA_KEY, JSON.stringify(testUser));
                        
                        AppState.authToken = 'mock_jwt_token_' + Date.now();
                        AppState.currentUser = testUser;
                        AppState.isLoggedIn = true;
                        AppState.isAdmin = testUser.role === 'admin' || testUser.isAdmin === true;
                        
                        Utils.trackGAEvent('Authentication', 'Login_Success', email);
                        return { success: true, user: testUser };
                    }
                    
                    // Бүртгэгдсэн хэрэглэгч шалгах
                    const registeredUser = UserService.getUserByEmail(email);
                    if (registeredUser && registeredUser.password === password) {
                        // Зөвхөн баталгаажсан хэрэглэгч нэвтрэх эрхтэй
                        if (registeredUser.status !== CONFIG.REGISTRATION_STATUS.APPROVED) {
                            Utils.trackGAEvent('Authentication', 'Login_Failed_Pending', email);
                            return { 
                                success: false, 
                                message: 'Таны бүртгэл админы баталгаажуулалт хүлээж байна' 
                            };
                        }
                        
                        localStorage.setItem(CONFIG.AUTH_TOKEN_KEY, 'mock_jwt_token_' + Date.now());
                        localStorage.setItem(CONFIG.USER_DATA_KEY, JSON.stringify(registeredUser));
                        
                        AppState.authToken = 'mock_jwt_token_' + Date.now();
                        AppState.currentUser = registeredUser;
                        AppState.isLoggedIn = true;
                        AppState.isAdmin = registeredUser.role === 'admin' || registeredUser.isAdmin === true;
                        
                        // Сүүлийн нэвтрэлтийг шинэчлэх
                        UserService.updateUser(registeredUser.id, { 
                            lastLogin: new Date().toISOString() 
                        });
                        
                        Utils.trackGAEvent('Authentication', 'Login_Success', email);
                        return { success: true, user: registeredUser };
                    }
                    
                    Utils.trackGAEvent('Authentication', 'Login_Failed_Invalid', email);
                    return { success: false, message: 'Имэйл эсвэл нууц үг буруу байна' };
                    
                } catch (error) {
                    Utils.trackGAEvent('Authentication', 'Login_Error', email);
                    return { 
                        success: false, 
                        message: 'Сервертэй холбогдоход алдаа гарлаа. Дараа дахин оролдоно уу.' 
                    };
                }
            }
            
            static async autoLogin() {
                const token = localStorage.getItem(CONFIG.AUTH_TOKEN_KEY);
                const userData = localStorage.getItem(CONFIG.USER_DATA_KEY);
                
                if (!token || !userData) return false;
                
                try {
                    AppState.authToken = token;
                    AppState.currentUser = JSON.parse(userData);
                    AppState.isLoggedIn = true;
                    AppState.isAdmin = AppState.currentUser.role === 'admin' || AppState.currentUser.isAdmin === true;
                    
                    Utils.trackGAEvent('Authentication', 'Auto_Login_Success', AppState.currentUser.email);
                    return true;
                    
                } catch (error) {
                    console.error('Auto-login failed:', error);
                    Utils.trackGAEvent('Authentication', 'Auto_Login_Failed', 'Token invalid');
                    this.logout();
                    return false;
                }
            }
            
            static logout() {
                Utils.trackGAEvent('Authentication', 'Logout', AppState.currentUser?.email);
                
                localStorage.removeItem(CONFIG.AUTH_TOKEN_KEY);
                localStorage.removeItem(CONFIG.USER_DATA_KEY);
                
                AppState.authToken = null;
                AppState.currentUser = null;
                AppState.isLoggedIn = false;
                AppState.isAdmin = false;
                AppState.selectedAdminUser = null;
                AppState.cache = {
                    userProfile: null,
                    progressData: null,
                    sessions: null,
                    brainwaveData: null,
                    cognitiveData: null,
                    learningSpeedData: null,
                    lastUpdated: null
                };
            }
        }
        
        // ============================================================================
        // MODAL SYSTEM
        // ============================================================================
        
        class ModalSystem {
            static init() {
                document.querySelectorAll('[data-modal]').forEach(button => {
                    button.addEventListener('click', (e) => {
                        e.preventDefault();
                        const modalId = button.getAttribute('data-modal');
                        this.openModal(modalId);
                    });
                });
                
                document.querySelectorAll('.close-modal, [data-action="close-modal"]').forEach(button => {
                    button.addEventListener('click', () => this.closeModal());
                });
                
                document.addEventListener('keydown', (e) => {
                    if (e.key === 'Escape' && AppState.activeModal) {
                        this.closeModal();
                    }
                });
                
                document.querySelectorAll('.modal').forEach(modal => {
                    modal.addEventListener('click', (e) => {
                        if (e.target === modal) {
                            this.closeModal();
                        }
                    });
                });
            }
            
            static openModal(modalId) {
                const modal = document.getElementById(modalId);
                if (!modal) return;
                
                AppState.activeModal = modalId;
                modal.classList.add('active');
                modal.setAttribute('aria-hidden', 'false');
                
                const firstInput = modal.querySelector('input, textarea, select, button');
                if (firstInput) firstInput.focus();
                
                DOM.body.style.overflow = 'hidden';
            }
            
            static closeModal() {
                if (!AppState.activeModal) return;
                
                const modal = document.getElementById(AppState.activeModal);
                if (modal) {
                    modal.classList.remove('active');
                    modal.setAttribute('aria-hidden', 'true');
                    
                    const form = modal.querySelector('form');
                    if (form) {
                        form.reset();
                        FormValidator.validateForm(form);
                    }
                }
                
                AppState.activeModal = null;
                DOM.body.style.overflow = '';
            }
        }
        
        // ============================================================================
        // EVENT HANDLERS
        // ============================================================================
        
        async function handleLoginSubmit(e) {
            e.preventDefault();
            
            if (!FormValidator.validateForm(DOM.loginForm)) return;
            
            const email = document.getElementById('loginEmail')?.value;
            const password = document.getElementById('loginPassword')?.value;
            
            const submitBtn = DOM.loginForm.querySelector('button[type="submit"]');
            Utils.setLoading(submitBtn, true);
            
            try {
                const result = await AuthService.login(email, password);
                
                if (result.success) {
                    ModalSystem.closeModal();
                    
                    const dashboardData = await DashboardService.loadDashboardData();
                    
                    DashboardService.show();
                    DashboardService.updateDashboardUI(dashboardData);
                    
                    Toast.success(`Тавтай морил, ${result.user.parentName}!`);
                } else {
                    Toast.error(result.message);
                }
            } catch (error) {
                Toast.error('Системийн алдаа гарлаа. Дараа дахин оролдоно уу.');
            } finally {
                Utils.setLoading(submitBtn, false);
            }
        }
        
        async function handleRegistrationSubmit(e) {
            e.preventDefault();
            
            if (!FormValidator.validateForm(DOM.registrationForm)) return;
            
            if (AppState.isLoading) return;
            
            AppState.isLoading = true;
            Utils.setLoading(DOM.submitBtn, true);
            
            try {
                const formData = FormValidator.getFormData(DOM.registrationForm);
                
                // Хэрэглэгийн өгөгдөл бэлтгэх
                const userData = {
                    email: formData.email,
                    phone: formData.phone,
                    role: 'parent',
                    name: formData.parentName,
                    childName: formData.childName,
                    birthDate: formData.birthDate,
                    parentName: formData.parentName,
                    phone: formData.phone,
                    program: formData.program,
                    message: formData.message || ''
                };
                
                // Хэрэглэгийг хадгалах
                const newUser = UserService.saveUser(userData);
                
                if (newUser) {
                    DOM.registrationForm.reset();
                    DOM.paymentSection.style.display = 'block';
                    
                    // Success modal харуулах
                    DashboardService.showRegistrationSuccess(newUser);
                    setTimeout(() => {
                DOM.paymentSection.scrollIntoView({ 
                    behavior: 'smooth',
                    block: 'start'
                });
            }, 500);
                    
                    Toast.success(`Бүртгэл амжилттай хийгдлээ! Бүртгэлийн дугаар: ${newUser.registrationId}`, 5000);
                    
                } else {
                    Toast.error('Бүртгэл хийхэд алдаа гарлаа');
                }
                
            } catch (error) {
                console.error('Registration error:', error);
                Toast.error('Системийн алдаа гарлаа. Дараа дахин оролдоно уу.');
            } finally {
                AppState.isLoading = false;
                Utils.setLoading(DOM.submitBtn, false);
            }
        }
        
        function handleLogout() {
            if (confirm('Та системээс гарахдаа итгэлтэй байна уу?')) {
                AuthService.logout();
                DashboardService.hide();
                Toast.info('Амжилттай гарлаа');
                
                window.scrollTo({ top: 0, behavior: 'smooth' });
            }
        }
        
        function handlePrintReport() {
            window.print();
            Utils.trackGAEvent('Dashboard', 'Report_Printed');
        }
        
        async function handleRefreshDashboard() {
            if (DOM.refreshDashboardBtn) {
                Utils.setLoading(DOM.refreshDashboardBtn, true);
            }
            
            try {
                const dashboardData = await DashboardService.loadDashboardData(true);
                DashboardService.updateDashboardUI(dashboardData);
                Toast.success('Өгөгдөл шинэчлэгдлээ');
            } catch (error) {
                Toast.error('Өгөгдөл шинэчлэхэд алдаа гарлаа');
            } finally {
                if (DOM.refreshDashboardBtn) {
                    Utils.setLoading(DOM.refreshDashboardBtn, false);
                }
            }
        }
        
        function handleMobileMenu() {
            const isExpanded = DOM.mobileMenuBtn.getAttribute('aria-expanded') === 'true';
            DOM.navLinks.classList.toggle('active');
            DOM.mobileMenuBtn.setAttribute('aria-expanded', !isExpanded);
            
            const icon = DOM.mobileMenuBtn.querySelector('i');
            if (icon) {
                icon.className = isExpanded ? 'fas fa-bars' : 'fas fa-times';
            }
        }
        
        function handleSmoothScroll(e) {
            e.preventDefault();
            
            const targetId = this.getAttribute('href');
            if (targetId === '#' || targetId.startsWith('#')) {
                const targetElement = document.querySelector(targetId);
                if (targetElement) {
                    window.scrollTo({
                        top: targetElement.offsetTop - 80,
                        behavior: 'smooth'
                    });
                    
                    history.pushState(null, null, targetId);
                    
                    if (DOM.navLinks.classList.contains('active')) {
                        handleMobileMenu();
                    }
                }
            }
        }
        
        function handleProgramButtonClick(e) {
            const button = e.target.closest('[data-program]');
            if (!button) return;
            
            const programType = button.getAttribute('data-program');
            const action = button.getAttribute('data-action');
            
            if (action === 'register') {
                const programSelect = DOM.registrationForm?.querySelector('#program');
                if (programSelect) {
                    programSelect.value = programType;
                    
                    setTimeout(() => {
                        Utils.scrollToElement('registration');
                    }, 300);
                }
            }
        }
        
        function handleScroll() {
            if (window.scrollY > 100) {
                DOM.header.classList.add('scrolled');
            } else {
                DOM.header.classList.remove('scrolled');
            }
        }
        
        function handleAdminPanel() {
            DashboardService.showAdminPanel();
            Utils.trackGAEvent('Admin', 'Panel_Accessed');
        }
        
        function handleBackToDashboard() {
            DashboardService.show();
        }
        
        function handleExportUsers() {
            UserService.exportUsers();
            Toast.success('Хэрэглэгчийн мэдээлэл экспортлогдлоо');
        }
        
        function handleRefreshAdminPanel() {
            AdminPanelService.loadAdminPanel();
            Toast.success('Админ хэсэг шинэчлэгдлээ');
        }
        
        function handleCloseSuccessModal() {
            ModalSystem.closeModal();
            setTimeout(() => {
        if (DOM.paymentSection.style.display === 'block') {
            DOM.paymentSection.scrollIntoView({ 
                behavior: 'smooth',
                block: 'start'
            });
        } else {
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }
    }, 300);

            window.scrollTo({ top: 0, behavior: 'smooth' });
        }
        
        function handlePrintCredentials() {
            const printContent = DOM.credentialsDisplay.innerHTML;
            const originalContent = document.body.innerHTML;
            
            document.body.innerHTML = `
                <div style="padding: 2rem; font-family: Arial, sans-serif;">
                    <h2 style="color: #4a6fa5; margin-bottom: 1rem;">Neurosun Academy - Нэвтрэх эрхүүд</h2>
                    ${printContent}
                    <p style="margin-top: 2rem; font-size: 0.9rem; color: #666;">
                        Энэхүү мэдээллийг нууцлахыг анхаарна уу. Хэрэв та нууц үгээ мартсан бол хаягаар холбогдоно уу.
                    </p>
                </div>
            `;
            
            window.print();
            document.body.innerHTML = originalContent;
            location.reload();
            
            Utils.trackGAEvent('Registration', 'Credentials_Printed');
        }
        
        // ============================================================================
        // INITIALIZATION
        // ============================================================================
        
        async function init() {
            console.log(`Initializing Neurosun Academy (${CONFIG.ENVIRONMENT})...`);
            
            Utils.updateCopyrightYear();
            
            FormValidator.init(DOM.loginForm);
            FormValidator.init(DOM.registrationForm);
            
            ModalSystem.init();
            PaymentSystem.init();
            
            // Анхны тест өгөгдөл нэмэх
            const existingUsers = UserService.getAllUsers();
            if (existingUsers.length === 0) {
                CONFIG.TEST_USERS.forEach(user => {
                    UserService.saveUser(user);
                });
            }
            
            const autoLoginSuccess = await AuthService.autoLogin();
            if (autoLoginSuccess) {
                const dashboardData = await DashboardService.loadDashboardData();
                DashboardService.show();
                DashboardService.updateDashboardUI(dashboardData);
                console.log('Auto-login successful');
            }
            
            // Event listeners
            document.addEventListener('click', handleProgramButtonClick);
            
            DOM.loginForm?.addEventListener('submit', handleLoginSubmit);
            DOM.registrationForm?.addEventListener('submit', handleRegistrationSubmit);
            DOM.logoutBtn?.addEventListener('click', handleLogout);
            DOM.printReportBtn?.addEventListener('click', handlePrintReport);
            DOM.refreshDashboardBtn?.addEventListener('click', handleRefreshDashboard);
            DOM.mobileMenuBtn?.addEventListener('click', handleMobileMenu);
            
            // Success modal
            DOM.closeSuccessModalBtn?.addEventListener('click', handleCloseSuccessModal);
            DOM.printCredentialsBtn?.addEventListener('click', handlePrintCredentials);
            
            // Admin panel
            DOM.adminPanelBtn?.addEventListener('click', handleAdminPanel);
            DOM.backToDashboardBtn?.addEventListener('click', handleBackToDashboard);
            DOM.exportUsersBtn?.addEventListener('click', handleExportUsers);
            DOM.refreshAdminPanelBtn?.addEventListener('click', handleRefreshAdminPanel);
            
            // Navigation
            document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', handleSmoothScroll);
            });
            
            window.addEventListener('scroll', handleScroll);
            
            // Анхны progress баруудыг reset хийх
            document.querySelectorAll('.progress-fill').forEach(bar => {
                bar.style.width = '0%';
            });
            
            handleScroll();
            
            if (CONFIG.ENVIRONMENT === 'development') {
                setTimeout(() => {
                    Toast.info(`Neurosun Academy (${CONFIG.ENVIRONMENT}) амжилттай ачаалагдлаа`, 3000);
                }, 1000);
            }
        }
        
        // ============================================================================
        // APPLICATION START
        // ============================================================================
        
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', init);
        } else {
            init();
        }
        
    </script>
</body>
</html>